/* ===== FULL CSS Theme (dark gray / light) ===== */
:root{
  color-scheme: dark;
  --bg:#16181b;         /* dark gray (not pitch black) */
  --panel:#1e2024;      /* panel surface */
  --panel-2:#1a1c1f;    /* header/footer bands */
  --border:#2b2f34;
  --muted:#aeb5bd;
  --brand:#2e5bea;
  --ok:#7dffa0; --err:#ff8b8b; --link:#9ecbff;
  --glass: rgba(255,255,255,.05); --glass-brd: rgba(255,255,255,.12);
  --text:#e9edf3;
  --shadow-3d: 0 24px 60px rgba(0,0,0,.35), 0 10px 24px rgba(0,0,0,.22);
   --outer-gap: 8px; 
}



body.light{
  color-scheme: light;
  --bg:#eef2f7;
  --panel:#ffffff;
  --panel-2:#f1f4f9;
  --border:#d7dbe2;
  --muted:#6b7280;
  --brand:#2457ff;
  --ok:#22985a; --err:#cc2f2f; --link:#204ecf;
  --glass: rgba(0,0,0,.05); --glass-brd: rgba(0,0,0,.12);
  --text:#0b0b0b;
  --shadow-3d: 0 24px 60px rgba(0,0,0,.12), 0 10px 24px rgba(0,0,0,.08);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{ margin:0; background:var(--bg); color:var(--text);
      font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }

/* ===== Header / Footer (taller, contrasting) ===== */
.site-header{
  display:flex; align-items:flex-start; gap:14px;
  padding:26px 24px; background:var(--panel-2);
  border-bottom:1px solid var(--border); box-shadow:var(--shadow-3d);
}
.site-header .logo{ display:flex; align-items:center; gap:12px; }
.site-header .logo img{
  width:52px; height:52px; border-radius:0%;
  object-fit:contain; background:transparent;
}      /* (15) bigger logo */
.site-header .brand{ line-height:1.05; }
.brand{ display:flex; flex-direction:column; }
.brand .powered{ margin-top:6px; display:block; }
.site-header nav{ margin-left:auto; display:flex; gap:20px; padding-top:6px; }
.site-header nav a{ color:var(--text); text-decoration:underline; text-underline-offset:3px; }
.site-header nav a:hover{ color:var(--brand); }

/* stage gives the outer gap and keeps footer visible */
.stage{
  padding-block: var(--outer-gap); /* equal gap above and below panels */
  padding-inline: 12px;            /* keep your side gap the same */
}

/* ===== App layout (grid with narrow gaps; square look) ===== */
.app{
  display:grid;
  grid-template-columns: 280px 8px minmax(360px,1fr) 8px minmax(360px, 42%);
  grid-template-rows: calc(100vh - 220px);
  gap:5px;                                /* (10) tighter gaps */
}
.app.collapsed-left{ grid-template-columns: 0 0 minmax(560px,1fr) 8px minmax(340px,42%); }

/* ===== Panel (square + elevated + glassy head) ===== */
.panel{
  background: linear-gradient(180deg, var(--panel) 0%, color-mix(in oklab, var(--panel), #000 4%) 100%);
  border:1px solid var(--border);
  border-radius:0px;                        /* square (10) */
  overflow:hidden;
  box-shadow: var(--shadow-3d);             /* (11) more elevated */
}
.pane-head{
  display:flex; align-items:center; gap:10px;
  padding:12px 12px;
  background:var(--glass); border-bottom:1px solid var(--glass-brd);
  backdrop-filter: blur(10px);
  font-weight:500;                          /* (1) no heavy bold */
}
.pane-head .title{ font-weight:500; }

/* Square buttons */
.btn{
  width:36px; height:36px; padding:0; border-radius:0px;    /* square (10) */
  border:1px solid var(--glass-brd); background:var(--glass); color:var(--text);
  cursor:pointer; font-weight:800; display:inline-grid; place-items:center;
  box-shadow: 0 10px 22px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.06);
}
.btn.primary{ background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.05)); border-color:transparent; }
.btn:disabled{ opacity:.6; cursor:not-allowed; }

/* Run / Reset animation cues (7) */
@keyframes pulse { 0%{transform:scale(1);} 50%{transform:scale(1.08);} 100%{transform:scale(1);} }
.btn.is-running{ animation:pulse .9s ease-in-out infinite; }
@keyframes spinReset { to{transform:rotate(360deg);} }
.btn.is-resetting svg{ animation:spinReset .7s linear infinite; }

/* Icons in buttons */
.btn svg{ width:18px; height:18px; fill:var(--text); }

/* Theme icon (3) smaller) */
.theme-btn{ width:36px; height:36px; }

/* Select in heads / left pane */
.select{
  background:var(--panel); color:var(--text);
  border:1px solid var(--border);
  border-radius:0px; padding:8px 10px; width:100%;
}
.select option{ background:var(--panel); color:var(--text); }   /* (5) visible in dark */

/* Left panel */
.left.panel{ grid-column:1 / span 1; display:flex; flex-direction:column; }
.left .pane-head .title{ display:none; }                        /* (12) remove "SQL" text */
.left .pane-head .select{ max-width:100%; }                     /* (1) full width dropdown in head */
.left .pane-body{ padding:10px 12px; height:100%; overflow:auto; }

/* Center panel (editor) */
.center.panel{ grid-column:3 / span 1; display:flex; flex-direction:column; }
.center .pane-head .title{ }
.center .pane-head .right-controls{ margin-left:auto; display:flex; gap:8px; align-items:center; }
#editor{ flex:1; }

/* Right panel (screen) */
.right.panel{ grid-column:5 / span 1; display:flex; flex-direction:column; }
#output{ flex:1; overflow:auto; padding:12px; }

/* Resizers (2,14) */
.v-resize{ width:8px; cursor:col-resize; }
.v-resize div{ width:100%; height:100%; background:transparent; }
.v-resize div:hover{ background:var(--glass); }

/* Frozen tone (6) single tint for all frozen panels) */
.panel.frozen{ filter:saturate(.85) brightness(.92); }
.panel.frozen .pane-head{ filter:grayscale(.2); }
.screen-dim{ opacity:.55; pointer-events:none; }

/* Links / footer */
a{ color:var(--link); text-decoration:underline; text-underline-offset:3px; }
a:hover{ color:#ffa043; }   

.site-footer{
  margin-top:12px; padding:18px 24px; background:var(--panel-2);
  border-top:1px solid var(--border); box-shadow:var(--shadow-3d);
  position:relative; z-index:2;             /* (4) stay above OS/taskbar */
}
.footer-tagline{ color:var(--muted); margin-bottom:8px; }
.footer-row{ display:flex; align-items:center; justify-content:space-between; }
.footer-row .legal a{ margin-right:14px; }

/* Social icons brighter in dark (8) */
.footer-row .social svg{ width:18px; height:18px; fill:color-mix(in oklab, var(--text), #fff 20%); }
.footer-row .social a:hover svg{ fill:var(--text); }



.panel.frozen{
  background: color-mix(in oklab, var(--panel), #777 12%);
  border-color: color-mix(in oklab, var(--border), #999 18%);
  color: gray;
}
body.light .panel.frozen{
  background: color-mix(in oklab, var(--panel), #000 6%);
  border-color: color-mix(in oklab, var(--border), #000 10%);
}

@keyframes glow {
  0%{ box-shadow:0 0 0 rgba(46,91,234,0); }
  50%{ box-shadow:0 0 18px rgba(46,91,234,.75); }
  100%{ box-shadow:0 0 0 rgba(46,91,234,0); }
}
@keyframes glowGreen {
  0%{ box-shadow:0 0 0 rgba(125,255,160,0); }
  50%{ box-shadow:0 0 18px rgba(125,255,160,.75); }
  100%{ box-shadow:0 0 0 rgba(125,255,160,0); }
}
.btn.is-running{ animation:glow 1.2s ease-in-out infinite; }
.btn.is-resetting{ animation:glowGreen 1.2s ease-in-out 2; } /* two pulses */
/* keep disabled styling but do NOT kill animations */
.btn:disabled{
  opacity:.6;
  cursor:not-allowed;
}

/* Allow glow even when disabled */
.btn.is-running,
.btn.is-running:disabled{
  animation:glow 1.2s ease-in-out infinite;
}
.btn.is-resetting,
.btn.is-resetting:disabled{
  animation:glowGreen 1.2s ease-in-out 2;
}



.pane-foot{
  border-top:1px solid var(--glass-brd);
  padding:8px 10px;
  background:var(--glass);
  font-size:12.5px;
}
.pane-foot .msg{ opacity:.92; }

/* green in dark, blue in light */
.pane-foot .msg:not(.status){ color:#83ffa6; }
body.light .pane-foot .msg{ color:#2457ff; }

/* site footer slightly higher (3) */
.site-footer{ padding:22px 24px; }

/* --- Continuous glow colors --- */
@keyframes glowBlue {
  0%, 100% { box-shadow: 0 0 0px   rgba(59,130,246,.0), 0 0 0px rgba(59,130,246,.0); }
  50%      { box-shadow: 0 0 16px  rgba(59,130,246,.6), 0 0 28px rgba(59,130,246,.35); }
}
@keyframes glowGreen {
  0%, 100% { box-shadow: 0 0 0px   rgba(34,197,94,.0),  0 0 0px rgba(34,197,94,.0); }
  50%      { box-shadow: 0 0 16px  rgba(34,197,94,.6),  0 0 28px rgba(34,197,94,.35); }
}

/* --- Subtle shake using transforms (no layout shift) --- */
@keyframes shake {
 
}

/* --- Let disabled buttons still animate --- */
.btn:disabled{
  opacity:.6;
  cursor:not-allowed;
}

/* --- RUN active: continuous blue glow + subtle shake --- */
.btn.is-running,
.btn.is-running:disabled{
  /* two animations at once */
  animation:
    glowBlue 1.2s ease-in-out infinite,
    shake    .6s  linear       infinite;
  will-change: transform, box-shadow;
}

/* --- RESET active: continuous green glow + subtle shake --- */
.btn.is-resetting,
.btn.is-resetting:disabled{
  animation:
    glowGreen 1.2s ease-in-out infinite,
    shake      .6s linear       infinite;
  will-change: transform, box-shadow;
}

/* Optional: reduce motion users */
@media (prefers-reduced-motion: reduce){
  .btn.is-running,
  .btn.is-running:disabled,
  .btn.is-resetting,
  .btn.is-resetting:disabled{
    animation: none;
    box-shadow: 0 0 0 rgba(0,0,0,0);
  }
}


/* Idle soft glow + gentle shake (from page load) */
@keyframes glowIdle {
  0%,100% { box-shadow: 0 0 0 rgba(99,102,241,0); }
  50%     { box-shadow: 0 0 12px rgba(99,102,241,.45); }
}
@keyframes shakeIdle {

}

/* apply on page load */
.btn.idle-attract,
.btn.idle-attract:disabled{
  animation:
    glowIdle 1.4s ease-in-out infinite,
    shakeIdle .8s linear       infinite;
  will-change: transform, box-shadow;
}

/* Active states override idle with stronger effects */
@keyframes glowBlue {
  0%,100% { box-shadow: 0 0 0 rgba(59,130,246,0), 0 0 0 rgba(59,130,246,0); }
  50%     { box-shadow: 0 0 18px rgba(59,130,246,.7), 0 0 34px rgba(59,130,246,.4); }
}
@keyframes glowGreen {
  0%,100% { box-shadow: 0 0 0 rgba(34,197,94,0), 0 0 0 rgba(34,197,94,0); }
  50%     { box-shadow: 0 0 18px rgba(34,197,94,.7), 0 0 34px rgba(34,197,94,.4); }
}
@keyframes shakeStrong {
 
}

/* Keep disabled buttons animating */
.btn:disabled { opacity:.6; cursor:not-allowed; }

/* RUN active (overrides idle) */
.btn.is-running,
.btn.is-running:disabled{
  animation:
    glowBlue    1.2s ease-in-out infinite,
    shakeStrong .5s  linear       infinite !important;
}

/* RESET active (overrides idle) */
.btn.is-resetting,
.btn.is-resetting:disabled{
  animation:
    glowGreen   1.2s ease-in-out infinite,
    shakeStrong .5s  linear       infinite !important;
}

/* Prefer reduced motion */
@media (prefers-reduced-motion: reduce){
  .btn.idle-attract,
  .btn.idle-attract:disabled,
  .btn.is-running,
  .btn.is-running:disabled,
  .btn.is-resetting,
  .btn.is-resetting:disabled{
    animation: none !important;
    box-shadow: none !important;
  }
}










/* ========== THEME TOKENS ========== */
:root{
  /* base */
  --bg: #0b0b0c;
  --text: #eaeaea;
  --muted: #b8b8b8;

  /* panels (transparent + fade) */
  --panel-bg: rgba(22,24,28,0.55);
  --panel-border: rgba(255,255,255,0.08);

  /* pane foot (bottom bars inside panels) */
  --pane-foot-bg: #000;
  --pane-foot-text: #fff;

  /* links */
  --link: #ffffff;
  --link-hover: #f59e0b;

  /* buttons */
  --btn-bg: #000000;   /* dark theme buttons = black */
  --btn-fg: #ffffff;   /* text/icon white */
}

body.light{
  --bg: #ffffff;
  --text: #0b0b0c;
  --muted: #444;

  --panel-bg: rgba(255,255,255,0.7);
  --panel-border: rgba(0,0,0,0.08);

  --pane-foot-bg: #ffffff; /* light pane foot */
  --pane-foot-text: #000000;

  --link: #000000;         /* light theme links = black */
  --link-hover: #f59e0b;

  --btn-bg: #ffffff;       /* light theme buttons = white */
  --btn-fg: #000000;       /* glow color uses currentColor = black */
}

/* ========== ROOT LAYOUT (NO PAGE SCROLL) ========== */
html, body { height: 100%; }
body{
  margin:0;
  color:var(--text);
  background:var(--bg);
  display:grid;
  grid-template-rows:auto 1fr auto; /* header, main, footer */
  overflow:hidden; /* no page scrollbars */
}

/* Header */
.site-header{
  display:flex; align-items:center; gap:14px;
  padding:10px 16px;
  border-bottom:1px solid var(--panel-border);
}
.site-header .logo{ display:flex; align-items:center; gap:10px; }
.site-header .logo img{ width:32px; height:32px; }
.site-header .brand{ display:flex; flex-direction:column; line-height:1.1; }
.site-header .brand .title{ font-weight:700; text-transform:lowercase; }
.site-header .brand .powered{ font-size:12px; color:var(--muted); }
.site-header .brand .tagline{ font-size:12px; color:var(--muted); }

.site-header nav{ margin-left:auto; display:flex; gap:16px; }
.site-header nav a{
  color:var(--link); text-decoration:none; font-weight:500;
}
.site-header nav a:hover{ color:var(--link-hover); }

/* Footer (site bottom) */
.site-footer{
  border-top:1px solid var(--panel-border);
  padding:8px 16px;
  background:transparent;
}
.footer-tagline{ text-align:center; font-size:12px; color:var(--muted); margin-bottom:6px; }

/* new footer 3-column layout */
.footer-grid{
  display:grid; grid-template-columns:1fr auto 1fr;
  align-items:center; gap:12px;
}
.footer-left{ display:flex; align-items:center; gap:10px; }
.footer-left img{ width:24px; height:24px; }
.footer-left .txt{ display:flex; flex-direction:column; line-height:1.1; }
.footer-left .txt .powered{ font-size:12px; color:var(--muted); }
.footer-left .txt .subline{ font-size:11px; color:var(--muted); }

.footer-center{ display:flex; align-items:center; gap:10px; justify-content:center; }
.footer-center .label{ font-size:12px; color:var(--muted); }
.footer-center a{ color:var(--link); text-decoration:none; display:inline-flex; }
.footer-center a:hover{ color:var(--link-hover); }

.footer-right{ display:flex; gap:16px; justify-content:flex-end; }
.footer-right a{ color:var(--link); text-decoration:none; font-size:12px; }
.footer-right a:hover{ color:var(--link-hover); }

/* ========== APP GRID ========== */
.stage{ padding:10px 12px; }
.app{
  height:100%; min-height:0; /* allow children to size inside viewport */
  display:grid; gap:8px; /* gaps between panels and resizers */
  /* columns dynamic from JS via gridTemplateColumns */
}

.panel{
  display:flex; flex-direction:column; min-width:0; min-height:0;
  background:var(--panel-bg);
  border:1px solid var(--panel-border);
  border-radius:0px;
  backdrop-filter: blur(6px); /* transparency effect */
  transition: background .25s ease, border-color .25s ease;
}

.pane-head{
  display:flex; align-items:center; gap:10px;
  padding:8px 10px;
  border-bottom:1px solid var(--panel-border);
  min-height:40px; /* consistent top bar height */
}
.pane-body{
  flex:1 1 auto; min-height:0; overflow:auto; /* scroll inside, not page */
  padding:10px;
}
.pane-foot{
  display:flex; align-items:center;
  padding:4px 8px;            /* reduced height to fit text */
  min-height:28px;            /* compact */
  border-top:1px solid var(--panel-border);
  background:var(--pane-foot-bg);
  color:var(--pane-foot-text);
}

/* vertical resizers */
.v-resize{ width:8px; display:flex; align-items:stretch; }
.v-resize > div{ flex:1; cursor:col-resize; opacity:.5; }
.v-resize.right{ }

/* ========== BUTTONS & ACTIVE ANIMATIONS ONLY ========== */
.btn{
  border:1px solid var(--panel-border);
  background:var(--btn-bg);
  color:var(--btn-fg);
  border-radius:0px;
  padding:6px 10px;
  display:inline-flex; align-items:center; justify-content:center;
  gap:6px;
  transition:transform .15s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
}
.btn svg{ width:18px; height:18px; fill:currentColor; }
.btn:hover{ transform: translateY(-1px); }
.btn:disabled{ opacity:.6; cursor:not-allowed; }

/* Glow uses currentColor so:
   - Dark theme: btn color is white -> white glow
   - Light theme: btn color is black -> black glow */
@keyframes glowPulse {
  0%,100% { box-shadow: 0 0 0 currentColor; }
  50%     { box-shadow: 0 0 18px currentColor, 0 0 34px currentColor; }
}
@keyframes shakeStrong {

}

/* Only when logically active */
.btn.is-running,
.btn.is-running:disabled{
  animation:
    glowPulse   1.2s ease-in-out infinite,
    shakeStrong 0.5s linear       infinite !important;
  will-change: transform, box-shadow;
}
.btn.is-resetting,
.btn.is-resetting:disabled{
  animation:
    glowPulse   1.2s ease-in-out infinite,
    shakeStrong 0.5s linear       infinite !important;
  will-change: transform, box-shadow;
}

/* Prefer reduced motion */
@media (prefers-reduced-motion: reduce){
  .btn.is-running,
  .btn.is-running:disabled,
  .btn.is-resetting,
  .btn.is-resetting:disabled{
    animation:none !important; box-shadow:none !important;
  }
}

/* Editor area should fill center panel */
#editor{ height:100%; min-height:0; }

/* Links in pane bodies/footers also theme to spec */
.panel a{ color:var(--link); text-decoration:none; }
.panel a:hover{ color:var(--link-hover); }

.site-header{ margin:0; }
.site-footer{ margin:0; }






/* ===== FIX: equal outer gaps + full-height app (override old grid row) ===== */
.site-header{ margin:0 !important; }
.site-footer{ margin:0 !important; }
.stage{
  padding-block: var(--outer-gap) !important; /* same gap above & below panels */
  padding-inline: 12px !important;
}
.app{
  height: 100% !important;
  min-height: 0 !important;
  grid-template-rows: 1fr !important; /* override any calc(100vh-220px) */
}

/* ===== FIX: stop any idle animations on buttons ===== */
.btn{ box-shadow: none; }                     /* base: no glow */
.btn:disabled{ opacity:.6; cursor:not-allowed; }

/* Remove any previously defined idle-attract behaviors */
.btn.idle-attract,
.btn.idle-attract:disabled{
  animation: none !important;
  box-shadow: none !important;
}

/* ===== Active attention state (only one button at a time) ===== */
/* Uses currentColor so: dark theme -> white glow; light theme -> black glow */
@keyframes glowPulseFix {
  0%,100% { box-shadow: 0 0 0 currentColor; }
  50%     { box-shadow: 0 0 18px currentColor, 0 0 34px currentColor; }
}
@keyframes shakeStrongFix {

}

/* The one-and-only highlight class */
.btn.attn,
.btn.attn:disabled{
  animation:
    glowPulseFix   1.2s ease-in-out infinite,
    shakeStrongFix 1.5s linear       infinite !important;
  will-change: transform, box-shadow;
}

/* If anything else tried to animate, kill it unless it‚Äôs .attn */
.btn:not(.attn){ animation: none !important; box-shadow: none !important; }




/* === Top/Bottom bar refinements (override) ============================ */

/* TOP BAR (header) ‚Äî glassy, sticky, themed links */
.site-header{
  position: sticky;
  top: 0;
  z-index: 50;
  background: var(--glass) !important;
  border-bottom: 1px solid var(--glass-brd) !important;
  backdrop-filter: blur(10px);
}
.site-header nav a{
  color: var(--text) !important;
  text-decoration: underline;
  text-underline-offset: 3px;
}
.site-header nav a:hover{ color: var(--brand) !important; }

/* BOTTOM BAR (site footer) ‚Äî glassy, a bit tighter */
.site-footer{
  background: var(--glass) !important;
  border-top: 1px solid var(--glass-brd) !important;
  backdrop-filter: blur(10px);
  padding-block: 14px !important; /* slightly tighter than before */
}

/* Footer grid: keep 3 columns on desktop, stack on small screens */
@media (max-width: 640px){
  .footer-grid{ grid-template-columns: 1fr; row-gap: 10px; }
  .footer-left, .footer-center, .footer-right{ justify-content: flex-start; }
}


/* OPTIONAL: ensure equal outer gaps + full-height app area */
.stage{
  padding-block: var(--outer-gap) !important; /* same gap above & below panels */
  padding-inline: 12px !important;
}
.app{
  height: 100% !important;
  min-height: 0 !important;
  grid-template-rows: 1fr !important; /* override any calc(...) row */
}


/* Ensure the output panel never looks frozen during run */
.right.panel.frozen,
.right.panel.frozen .pane-head{
  filter: none !important;
}






/* --- Left panel scroll FIX --- */
.app,
.panel { min-height: 0 !important; }  /* lets children shrink/scroll */

.left.panel { min-height: 0 !important; }

.left .pane-body{
  /* undo earlier height:100% rule */
  height: auto !important;
  min-height: 0 !important;
  flex: 1 1 auto !important;
  overflow: auto !important;     /* show scrollbar when needed */
  -webkit-overflow-scrolling: touch; /* smooth on iOS */
}

/* Safety: large tables/pre won‚Äôt force horizontal growth */
.left .pane-body table,
.left .pane-body pre{
  display: block;
  max-width: 100%;
  overflow: auto;
}

/* Safety: if the imported doc centers at big widths, allow it but don‚Äôt overflow */
#leftContent .wrap{ max-width: 1200px; margin: 0 auto; }


/* --- LEFT PANE VERTICAL SCROLL FIX ---------------------------------- */
/* Critical: allow grid/flex children to shrink so the inner area can scroll */
.app,
.panel,
.left.panel {
  min-height: 0 !important;
}

/* Make the left body the actual scroll container (override older height:100%) */
.left .pane-body{
  height: auto !important;         /* undo the earlier 100% height */
  min-height: 0 !important;        /* allow shrinking within the panel */
  flex: 1 1 0 !important;          /* take remaining space, not more */
  overflow-y: auto !important;     /* <-- vertical scrollbar when needed */
  overflow-x: auto;                /* keep your horizontal scroll as-is */
  -webkit-overflow-scrolling: touch; /* smoother on iOS */
}

/* Safety: big blocks shouldn‚Äôt force the container to grow */
.left .pane-body table,
.left .pane-body pre,
.left .pane-body .wrap{
  max-width: 100%;
  overflow: auto;
}
















/* ==== Footer status chips with tiny animations ==== */
.pane-foot .msg.status{
  display:inline-flex; align-items:center; gap:8px; font-weight:500;
}
.pane-foot .msg.status .icon{
  width:12px; height:12px; border-radius:999px; display:inline-block; position:relative;
}
.pane-foot .msg.status .text{ display:inline-flex; align-items:baseline; gap:4px; }

/* Colors per state (uses your tokens) */
.pane-foot .status.ready   { color: var(--ok); }
.pane-foot .status.waiting { color: var(--brand); }
.pane-foot .status.running { color: var(--brand); }
.pane-foot .status.success { color: var(--ok); }
.pane-foot .status.error   { color: var(--err); }

/* READY: soft pulsing dot */
@keyframes pulseDot {
  0%,100% { transform: scale(1);   box-shadow: 0 0 0 0 currentColor; }
  50%     { transform: scale(1.15); box-shadow: 0 0 10px 2px color-mix(in oklab, currentColor, transparent 60%); }
}
.pane-foot .status.ready .icon{
  background: currentColor;
  animation: pulseDot 1.2s ease-in-out infinite;
}

/* WAITING: breathing ring + animated dots ‚Ä¶ */
@keyframes breath {
  0%,100% { box-shadow: 0 0 0 0 currentColor; }
  50%     { box-shadow: 0 0 8px 2px color-mix(in oklab, currentColor, transparent 60%); }
}
.pane-foot .status.waiting .icon{
  border: 2px solid currentColor; background: transparent;
  animation: breath 1.4s ease-in-out infinite;
}
/* three jumping dots */
@keyframes dot {
  0%,20% { opacity:.2; transform: translateY(0); }
  50%    { opacity:1;  transform: translateY(-2px); }
  80%,100%{ opacity:.2; transform: translateY(0); }
}
.pane-foot .status.waiting .dots span{
  display:inline-block; width:4px; height:4px; border-radius:999px; background: currentColor; margin-left:3px;
  animation: dot 1.2s ease-in-out infinite;
}
.pane-foot .status.waiting .dots span:nth-child(2){ animation-delay:.2s; }
.pane-foot .status.waiting .dots span:nth-child(3){ animation-delay:.4s; }

/* RUNNING: small spinner */
@keyframes spin { to { transform: rotate(360deg); } }
.pane-foot .status.running .icon{
  width:12px; height:12px; border-radius:999px;
  border:2px solid transparent; border-top-color: currentColor; border-left-color: currentColor;
  animation: spin .8s linear infinite;
}

/* SUCCESS: check with a pop */
@keyframes popIn { 0%{transform:scale(.6);opacity:0} 60%{transform:scale(1.2);} 100%{transform:scale(1);opacity:1} }
.pane-foot .status.success .icon{
  border:2px solid currentColor; background:transparent;
}
.pane-foot .status.success .icon::before{
  content:'‚úì'; position:absolute; inset:0; display:grid; place-items:center;
  font-size:10px; font-weight:700; color: currentColor; animation: popIn .35s ease-out both;
}

/* ERROR: cross with a gentle shake */
@keyframes shakeX {

}
.pane-foot .status.error .icon{
  border:2px solid currentColor; background:transparent; animation: shakeX .5s linear 1;
}
.pane-foot .status.error .icon::before{
  content:'‚úï'; position:absolute; inset:0; display:grid; place-items:center;
  font-size:10px; font-weight:700; color: currentColor;
}

/* Accessibility: respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .pane-foot .msg.status .icon,
  .pane-foot .msg.status .dots span{ animation:none !important; }
}

/* === Bottom bar colors per pane ======================================= */
/* Left (About) -> Orange, always */
#leftFoot{
  color: #f59e0b !important;        /* orange */
}

/* Middle (Editor) -> Green, always */
#centerFoot{
  color: var(--ok) !important;       /* your green token */
}

/* Right (Screen) -> Blue by default; Red only on error */
#rightFoot{
  color: var(--brand) !important;    /* blue for waiting/running/success */
}
#rightFoot.error,
#rightFoot.status.error{
  color: var(--err) !important;      /* red on error */
}

/* Make tiny icons/dots inherit the host color */
#leftFoot .icon,
#centerFoot .icon,
#rightFoot .icon{ color: inherit; }
#leftFoot .dots span,
#centerFoot .dots span,
#rightFoot .dots span{ background: currentColor; }









/* READY */
.pane-foot .status.ready .icon,
.pane-foot.status.ready .icon{
  background: currentColor;
  animation: pulseDot 1.2s ease-in-out infinite;
}

/* WAITING */
.pane-foot .status.waiting .icon,
.pane-foot.status.waiting .icon{
  border: 2px solid currentColor; background: transparent;
  animation: breath 1.4s ease-in-out infinite;
}
.pane-foot .status.waiting .dots span,
.pane-foot.status.waiting .dots span{
  display:inline-block; width:4px; height:4px; border-radius:999px; background: currentColor; margin-left:3px;
  animation: dot 1.2s ease-in-out infinite;
}
.pane-foot .status.waiting .dots span:nth-child(2),
.pane-foot.status.waiting .dots span:nth-child(2){ animation-delay:.2s; }
.pane-foot .status.waiting .dots span:nth-child(3),
.pane-foot.status.waiting .dots span:nth-child(3){ animation-delay:.4s; }

/* RUNNING */
.pane-foot .status.running .icon,
.pane-foot.status.running .icon{
  width:12px; height:12px; border-radius:999px;
  border:2px solid transparent; border-top-color: currentColor; border-left-color: currentColor;
  animation: spin .8s linear infinite;
}

/* SUCCESS */
.pane-foot .status.success .icon,
.pane-foot.status.success .icon{
  border:2px solid currentColor; background:transparent;
}
.pane-foot .status.success .icon::before,
.pane-foot.status.success .icon::before{
  content:'‚úì'; position:absolute; inset:0; display:grid; place-items:center;
  font-size:10px; font-weight:700; color: currentColor; animation: popIn .35s ease-out both;
}

/* ERROR */
.pane-foot .status.error .icon,
.pane-foot.status.error .icon{
  border:2px solid currentColor; background:transparent; animation: shakeX .5s linear 1;
}
.pane-foot .status.error .icon::before,
.pane-foot.status.error .icon::before{
  content:'‚úï'; position:absolute; inset:0; display:grid; place-items:center;
  font-size:10px; font-weight:700; color: currentColor;
}


/* ready */
.pane-foot.status.ready .icon{ background: currentColor; animation: pulseDot 1.2s ease-in-out infinite; }
/* waiting */
.pane-foot.status.waiting .icon{ border:2px solid currentColor; background:transparent; animation: breath 1.4s ease-in-out infinite; }
.pane-foot.status.waiting .dots span{ animation: dot 1.2s ease-in-out infinite; }
/* running */
.pane-foot.status.running .icon{ border:2px solid transparent; border-top-color:currentColor; border-left-color:currentColor; animation: spin .8s linear infinite; }
/* success */
.pane-foot.status.success .icon{ border:2px solid currentColor; background:transparent; }
.pane-foot.status.success .icon::before{ content:'‚úì'; animation: popIn .35s ease-out both; }
/* error */
.pane-foot.status.error .icon{ border:2px solid currentColor; background:transparent; animation: shakeX .5s linear 1; }
.pane-foot.status.error .icon::before{ content:'‚úï'; }







/* === Header: center brand block, stack vertically, keep nav on right === */
.site-header{
  display: grid !important;
  grid-template-columns: 1fr auto 1fr !important; /* left spacer ‚Ä¢ center brand ‚Ä¢ right nav */
  align-items: center !important;
  gap: 12px !important;
}

.site-header .logo{
  grid-column: 2 !important;               /* center cell */
  display: flex !important;
  flex-direction: column !important;       /* stack: logo -> title -> tagline */
  align-items: center !important;
  gap: 4px !important;
  margin: 0 auto !important;
}

.site-header .logo img{
  width: 48px !important;
  height: 48px !important;
  object-fit: contain !important;
}

.site-header .brand{
  line-height: 1.05 !important;
  text-align: center !important;
}


.site-header .brand .powered{
  display: none !important;                /* hide per request for top bar */
}

.site-header .brand .tagline{
  font-size: 12px !important;              /* learn ‚Ä¢ code ‚Ä¢ run */
  color: var(--muted) !important;
}

.site-header nav{
  grid-column: 3 !important;               /* right cell */
  justify-self: end !important;
  display: flex !important;
  gap: 16px !important;
}












/* --- Centered compact header with bigger title --- */
.site-header{
  display:grid;
  grid-template-columns: 1fr auto 1fr; /* center brand, keep nav on the right */
  align-items:center;
  gap:12px;
  padding:10px 16px;                /* tighter vertical space */
  background: var(--glass);
  border-bottom: 1px solid var(--glass-brd);
  backdrop-filter: blur(10px);
}

/* center block */
.brand-row{
  grid-column: 2;                   /* middle column -> perfectly centered */
  display:flex; align-items:center; gap:12px;
}

/* logo size up */
.brand-logo{ width:56px; height:56px; object-fit:contain; }

/* text stack next to logo */
.brand-text{ display:flex; flex-direction:column; line-height:1.08; }
.brand-text2{ display:flex; flex-direction:column; line-height:2.08; }
/* bigger title, smaller tagline */
.brand-title{
  font-weight:800;
  text-transform:lowercase;
  letter-spacing:.2px;
  font-size: clamp(22px, 2.4vw, 30px);
}
.brand-tagline{
  color: var(--muted);
  font-size: clamp(12px, 1.2vw, 14px);
  margin-top: 2px;
}

/* nav stays right, doesn‚Äôt affect centering */
.site-nav{ grid-column: 3; justify-self:end; display:flex; gap:16px; }
.site-nav a{
  color: var(--text);
  text-decoration: underline;
  text-underline-offset: 3px;
}
.site-nav a:hover{ color: var(--brand); }

/* small screens: scale down a touch */
@media (max-width: 640px){
  .brand-logo{ width:44px; height:44px; }
}


/* Emojis for panel titles */
.center.panel .pane-head .title::before { content: "üßë‚Äçüíª "; }
.right.panel  .pane-head .title::before { content: "üñ•Ô∏è "; }

/* tiny spacing tweak if needed */
.pane-head .title::before { margin-right: 2px; }



/* --- Top bar: center brand block, keep nav on the right --- */
.site-header{
  display: grid !important;
  grid-template-columns: 1fr auto 1fr !important; /* left | brand | right */
  align-items: center !important;
}
.site-header .logo{
  grid-column: 2 !important;         /* center cell */
  justify-self: center !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 12px !important;               /* logo <> text gap */
}

/* nav stays on the right */
.site-header nav{
  grid-column: 3 !important;
  justify-self: end !important;
}

/* --- Brand visuals --- */
.site-header .logo img{
  width: 80px !important;             /* large logo */
  height: 80px !important;
  object-fit: contain;
}













/* Center the brand block in the header, keep nav on the right */
.site-header{
  display:grid !important;
  grid-template-columns: 1fr auto 1fr !important;
  align-items:center !important;
}
.site-header .logo{ grid-column:2; justify-self:center; display:flex; align-items:center; gap:12px; }
.site-header nav{ grid-column:3; justify-self:end; }

/* Bigger logo */
.site-header .logo img{ width:56px; height:56px; }

/* ‚Äúpolycode‚Äù: larger, NOT bold */
.site-header .brand .title{
  font-weight:300 !important;   /* kill bold */
  font-size:70px;               /* a bit larger */
  line-height:1;
}

/* Slogan centered under the title, smaller */
.site-header .brand{
  display:flex; flex-direction:column;
}
.site-header .brand .tagline{
  font-size:12px;               /* smaller than title */
  line-height:1.2;
  text-align:center;            /* centered to the title */
  margin-top:2px;
}

/* Optional: remove any leftover heavy styling from earlier CSS */


/* FINAL wordmark settings ‚Äî wins the cascade */
.site-header .brand .title2{
  font-weight:400 !important;  /* light */
  text-transform:none !important;
  font-size: clamp(28px, 3.2vw, 44px); /* larger but not shouty */
  line-height:2.05;
}






/* Header brand block (matches your current HTML classes) */
.brand-text2{
  display:flex;
  flex-direction:column;
  align-items:center;     /* centers the slogan under the title */
  line-height:1.1;
  text-align:center;
}

.brand-title2{
  font-weight:500;        /* not bold */
  text-transform:none;
  font-size: 40px;  /* larger wordmark */
  line-height:2.05;
  letter-spacing:.2px;
}

.brand-tagline2{
  margin-top:2px;
  font-size:20px;         /* smaller than the title */
  color:var(--muted);
  text-align:center;
}










/* === FINAL: compact centered header with logo on the left ============= */
.site-header{
  display:grid !important;
  grid-template-columns: 1fr auto 1fr !important; /* left spacer | brand | nav */
  align-items:center !important;
  padding:10px 16px !important;                    /* tighter */
  background: var(--glass) !important;
  border-bottom:1px solid var(--glass-brd) !important;
  backdrop-filter: blur(10px);
}

.brand-row{
  grid-column:2 !important;
  display:flex !important;
  align-items:center !important;
  gap:12px !important;
  justify-self:center !important;                 /* whole block centered */
}

.brand-logo{
  width:48px !important;
  height:48px !important;                          /* ~height of title+slogan */
  object-fit:contain !important;
}

.brand-text2{
  display:flex !important;
  flex-direction:column !important;
  line-height:1.05 !important;
}

.brand-title2{
  font-weight:400 !important;                      /* not bold */
  font-size:28px !important;                       /* compact */
  letter-spacing:.2px;
}

.brand-tagline2{
  margin-top:2px !important;
  font-size:12px !important;                       /* smaller than title */
  color:var(--muted) !important;
  text-align:left !important;                      /* aligns with title */
}

/* keep nav pinned right */
.site-nav{ grid-column:3 !important; justify-self:end !important; display:flex; gap:16px; }











/* --- Compact centered lockup ---------------------------------------- */
.site-header{
  display:grid !important;
  grid-template-columns: 1fr auto 1fr !important; /* left spacer | brand | nav */
  align-items:center !important;
  gap:12px !important;
  padding:10px 16px !important;
}

.brand-lockup{
  grid-column:2 !important;                 /* keep whole lockup centered */
  display:flex !important;
  align-items:center !important;
  gap:12px !important;
}

.brand-logo{
  width:56px !important;                     /* logo sits left of both lines */
  height:56px !important;
  object-fit:contain !important;
  flex:0 0 auto;
}

.brand-stack{
  display:flex !important;
  flex-direction:column !important;
  align-items:flex-start !important;         /* title left aligned */
  width:max-content;                          /* stack width = title width */
  line-height:1.05;
}

.brand-title{
  font-weight:400 !important;                /* not bold */
  font-size: clamp(22px, 2.6vw, 28px) !important; /* compact */
  text-transform:none !important;
}

.brand-tagline{
  margin-top:2px;
  font-size: clamp(11px, 1.2vw, 13px) !important; /* smaller than title */
  color: var(--muted);
  align-self:center;                         /* center under the title width */
  text-align:center;
}

/* nav stays on the right */
.site-nav{ grid-column:3 !important; justify-self:end !important; display:flex; gap:16px; }



/* tagline stays compact */
.brand-tagline2,
.brand-tagline { 
  font-size: clamp(11px, 1.2vw, 13px);
  color: var(--muted);
  text-align: center;
}

/* make ONLY the dots bold/heavier */
.brand-tagline2 .dot,
.brand-tagline  .dot{
  font-weight: 900;          /* bold dot */
  font-size: 1.05em;         /* a touch larger so it reads like a bullet */
  margin: 0 2px;             /* spacing similar to ‚Ä¢ */
  display: inline-block;
  transform: translateY(-0.02em); /* subtle vertical centering */
}












/* ===== Compact header with left logo spanning title + tagline ===== */
:root{
  --brand-title2-size: clamp(24px, 2.6vw, 34px);
  --brand-tagline2-size: clamp(12px, 1.3vw, 14px);
  --brand-gap-y: 2px;
  --brand-logo-extra: 10px; /* bump to 12‚Äì16px if the logo needs more cover */
}

header.site-header{
  display: grid !important;
  grid-template-columns: 1fr auto 1fr !important; /* left spacer | brand | nav */
  align-items: center !important;
  gap: 12px !important;
  padding: 12px 16px !important;
  background: var(--glass) !important;
  border-bottom: 1px solid var(--glass-brd) !important;
  backdrop-filter: blur(10px);
  overflow: visible !important; /* let header grow with the brand block */
}

/* center column = brand */
.brand-wrap{ grid-column: 2; justify-self: center; }

/* grid: logo left spans 2 rows; title (row1) + tagline (row2) on the right */
.brand-grid{
  display: grid;
  grid-template-columns: auto 1fr;
  grid-template-rows: auto auto;
  column-gap: 12px;
  row-gap: var(--brand-gap-y);
  align-items: center;
}

/* make logo cover the combined height of title + tagline */
.brand-logo{
  grid-row: 1 / 3;
  width:  calc(var(--brand-title2-size) + var(--brand-tagline2-size) + var(--brand-gap-y) + var(--brand-logo-extra));
  height: calc(var(--brand-title2-size) + var(--brand-tagline2-size) + var(--brand-gap-y) + var(--brand-logo-extra));
  object-fit: contain;
}

/* title: larger, not bold */
.brand-title2{
  font-size: var(--brand-title2-size);
  font-weight: 400;      /* no bold */
  line-height: 1.05;
  white-space: nowrap;
}

/* tagline: smaller, sits directly under title */
.brand-tagline2{
  font-size: var(--brand-tagline2-size);
  line-height: 1.1;
  color: var(--muted);
  white-space: nowrap;
}

/* bold bullet-like dots */
.brand-tagline2 .dot{
  font-weight: 900;
  display: inline-block;
  margin: 0 .25ch;
  transform: translateY(-0.02em);
}

/* right-side nav stays on the right */
.site-nav{ grid-column: 3; justify-self: end; display:flex; gap:16px; }
.site-nav a{
  color: var(--text) !important;
  text-decoration: underline;
  text-underline-offset: 3px;
}
.site-nav a:hover{ color: var(--brand) !important; }












/* === Footer v2 ===================================================== */
.site-footer{
  background: var(--glass) !important;
  border-top: 1px solid var(--glass-brd) !important;
  backdrop-filter: blur(10px);
  padding: 18px 24px !important;  /* increase if you want taller */
}

.footer-grid{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  gap:16px;
}

/* Left block */
.footer-left{ display:flex; align-items:center; gap:10px; }
.footer-logo{ width:26px; height:26px; object-fit:contain; }
.footer-left .powered{ font-size:12px; line-height:1.1; }
.footer-left .subline{ font-size:12px; color:var(--muted); line-height:1.1; }
.footer-left .subline .dot{ font-weight:900; margin:0 2px; } /* bold dots */

/* Center (Follow us + icons) */
.footer-center{ display:flex; align-items:center; gap:12px; justify-content:center; }
.footer-center .label{ font-size:12px; color:var(--muted); margin-right:2px; }
.footer-center a.social{ display:inline-flex; color:var(--link); }
.footer-center a.social:hover{ color:var(--link-hover); }
.footer-center a.social svg{ width:18px; height:18px; fill:currentColor; }

/* Right links: underline */
.footer-right{ display:flex; gap:16px; justify-content:flex-end; }
.footer-right a{ color:var(--link); text-decoration:underline !important; }
.footer-right a:hover{ color:var(--link-hover); }

/* === Top bar: match link hover color to footer (orange) ============ */
.site-header nav a:hover,
.site-nav a:hover{ color: var(--link-hover) !important; }

/* Small screens */
@media (max-width:640px){
  .footer-grid{ grid-template-columns: 1fr; row-gap:10px; }
  .footer-right{ justify-content:flex-start; flex-wrap:wrap; gap:12px; }
}





/* Footer logo base */
.footer-logo{
  width: 24px; height: 24px;
  object-fit: contain;
  background: transparent !important;
}

/* Dark theme: blend out white boxes reasonably well */
body:not(.light) .footer-logo{
  mix-blend-mode: multiply;
}

/* If you later want a perfect, theme-colored mono mark without changing files,
   use a masked placeholder instead of <img>:

.footer-logo-mask{
  display:inline-block;
  width:24px; height:24px;
  background: currentColor; /* inherits text color */
  -webkit-mask: url("./assets/logo.png") center/contain no-repeat;
          mask: url("./assets/logo.png") center/contain no-repeat;
}
*/


/* Footer left text sizing */
.footer-left .txt .powered{
  font-size: 14.5px !important;   /* bigger than slogan */
  font-weight: 600;                /* a touch of weight */
  letter-spacing: .2px;
  color: var(--text);
}

.footer-left .txt .subline{
  font-size: 12.5px !important;    /* smaller */
  color: var(--muted);
}



/* Header links hover = same orange as footer */
.site-header nav a:hover,
.site-nav a:hover{
  color: var(--link-hover) !important; /* #f59e0b */
  text-decoration: underline;
  text-underline-offset: 3px;
}



/* --- Footer logo: crop out the white square & keep transparent --- */
/* Works even if you don't touch the HTML */
.footer-left > img,
.footer-left .footer-logo{
  width: 45px;
  height: 45px;
  object-fit: contain;
  background: transparent !important;
  border-radius: 10% !important;              /* hide the square corners */
  clip-path: circle(50% at 50% 50%);          /* hard crop to a circle */
  vertical-align: middle;
}
/* Optional: dark theme blend helps if the PNG is bright */
body:not(.light) .footer-left > img,
body:not(.light) .footer-left .footer-logo{
  mix-blend-mode: multiply;
}

/* --- Footer text sizing: "powered by edifica" larger than slogan --- */
.footer-left .txt .powered{
  font-size: 15px !important;               /* larger */
  font-weight: 400;
  letter-spacing: .2px;
  color: var(--text) !important;
  line-height: 2.2;
}
.footer-left .txt .subline{
  font-size: 10px !important;               /* smaller */
  color: var(--muted) !important;
}





/* --- Footer logo: thinner ring ----------------------------------- */
.footer-left > img,
.footer-left .footer-logo{
  width: 45px;
  height: 45px;
  object-fit: contain;
  background: transparent !important;

  /* crop a tiny bit to shave off the thick white edge from the PNG */
  border-radius: 50%;
  clip-path: inset(2px round 50%);          /* trims ~2px all around */
  outline: 1px solid rgba(255,255,255,.18); /* thin, subtle stroke */
  outline-offset: -1px;                      /* sits right on the edge */
}

/* --- Footer text: reduce spacing between lines -------------------- */
.footer-left .txt{
  display: flex;
  flex-direction: column;
  gap: 2px;               /* was visually larger; make it snug */
  line-height: 1.1;
}

.footer-left .txt .powered{
  font-size: 15px !important;   /* keep larger than slogan */
  font-weight: 500;
  margin: 0;                     /* remove extra space */
  line-height: 1.1;              /* tighter */
}

.footer-left .txt .subline{
  font-size: 10px !important;
  color: var(--muted) !important;
  margin: 0;                     /* remove extra space */
  line-height: 1.1;              /* tighter */
}




.footer-left .txt .siteurl{
  font-size: 10px;       /* slightly smaller than slogan */
  color: var(--muted);
  margin-top: 2px;
}

.footer-left .txt .siteurl a{
  color: var(--link);
  text-decoration: none;
}

.footer-left .txt .siteurl a:hover{
  color: var(--link-hover);
  text-decoration: underline;
}







/* ===== Page fade-in (entire app) ===== */
@keyframes pageIn { from{opacity:0; transform: translateY(6px)} to{opacity:1; transform:none} }
.page-fade, body.page-fade{
  animation: pageIn .55s ease-out both;
}

/* Optional: gentle stagger for main regions */
.page-fade .site-header{ animation-delay: .02s; }
.page-fade .stage, .page-fade .app{ animation-delay: .06s; }
.page-fade .site-footer{ animation-delay: .10s; }

/* Reduced motion: no entrance effects */
@media (prefers-reduced-motion: reduce){
  .page-fade, body.page-fade,
  .page-fade .site-header, .page-fade .stage, .page-fade .app, .page-fade .site-footer{
    animation: none !important;
  }
}





/* 1) Let output be scrollable even when dimmed */
.screen-dim{
  opacity:.55;               /* keep the visual dim */
  /* pointer-events:none; */ /* <-- REMOVE this (blocks scrolling/clicks) */
}

/* 2) Make the scrolling chain work in flex/grid layouts */
.app, .panel,
.center.panel, .right.panel { min-height: 0 !important; }

.center.panel, .right.panel { display:flex; flex-direction:column; }

#editor{
  flex: 1 1 0 !important;
  min-height: 0 !important;
  height: 100% !important;   /* ensures Monaco gets space */
  display: block;
}

#output{
  flex: 1 1 0 !important;
  min-height: 0 !important;
  overflow: auto !important; /* vertical & horizontal when needed */
}

/* (Web preview page) iframe should fill the output; it will scroll INSIDE */
#preview{
  display:block;
  width:100%;
  height:100%;
  border:0;
}




/* Output should always use the panel skin / be transparent */
.right.panel { background: var(--panel-bg); }

/* Never let #output turn white (or any solid) */
#output { 
  background: transparent !important;
  color: var(--text);
}

/* If any child (tables/pre) brings a background, kill it */
#output *, #output table, #output pre {
  background-color: transparent !important;
}

/* Keep the preview/output area transparent in any theme */
#output { background: transparent !important; }
#output iframe { background: transparent !important; }




.btn.is-running:disabled{
  animation: none !important;
    
}
.btn.is-resetting:disabled{
  animation: none !important;
   
}












/* === Responsive layout: tablet & mobile =============================== */

/* Tablet and below: stack panels vertically, hide resizers,
   let the chevron toggle the left panel visibility */
@media (max-width: 1024px){
  .app{
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    height: 100% !important;
    min-height: 0 !important;
  }

  /* Resizers are desktop-only */
  .v-resize{ display:none !important; }

  /* By default on small screens we consider the left panel collapsed.
     The chevron toggles .collapsed-left on .app, so wire visibility to that: */
  .left.panel{ display:none; } /* base: hidden */
  .app:not(.collapsed-left) .left.panel{ display:block; } /* shown when expanded via chevron */

  /* Make heads a touch more compact */
  .pane-head{ padding: 10px 12px; }

  /* Give editor and output reasonable minimum heights */
  #editor{ min-height: 42vh; }
  #output{ min-height: 36vh; }

  /* Buttons and selects: slightly larger touch targets */
  .btn{ width:40px; height:40px; }
  .select{ font-size: 16px; }
}

/* Phone: tighten further */
@media (max-width: 640px){
  .pane-head{ padding: 8px 10px; }
  #editor{ min-height: 48vh; }
  #output{ min-height: 34vh; }
  .site-header{ padding: 14px 16px; }
  .footer-grid{ grid-template-columns: 1fr; row-gap: 10px; }
  .footer-left, .footer-center, .footer-right{ justify-content: flex-start; }
}

/* Prevent horizontal scrolling on small screens */
@media (max-width: 1024px){
  html, body{ overflow-x:hidden; }
}




/* --- Mobile/Tablet layout ----------------------------------------- */
/* Let children shrink/scroll inside the viewport */
.app, .panel { min-height: 0 !important; }

/* Left body should scroll on small screens */
.left .pane-body{
  min-height: 0 !important;
  overflow: auto !important;
  -webkit-overflow-scrolling: touch;
}

/* Hide resizers on touch layouts; stack panels vertically */
@media (max-width: 1024px){
  .app{
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    height: 100% !important;
    min-height: 0 !important;
  }
  .v-resize{ display:none !important; }

  /* Comfortable editor/output heights on mobile */
  #editor{ min-height: 44svh; }
  #output{ min-height: 40svh; }

  /* Bigger touch targets */
  .btn{ width:40px; height:40px; }
  .select{ font-size:16px; }
}

/* Phone tweaks */
@media (max-width: 640px){
  .pane-head{ padding: 8px 10px; min-height: 40px; }
  #editor{ min-height: 48svh; }
  #output{ min-height: 34svh; }

  /* Header + footer compress nicely */
  .site-header{ padding: 12px 14px; }
  .footer-grid{ grid-template-columns: 1fr; row-gap: 10px; }
  .footer-right{ justify-content:flex-start; flex-wrap:wrap; gap:12px; }
}

/* Safer viewport units on iOS/Android */
html, body { height: 100%; }
.stage, .app { block-size: auto; }





/* Reuse the same 3-dot animation for waiting AND running */
@keyframes dot {
  0%,20% { opacity:.2; transform: translateY(0); }
  50%    { opacity:1;  transform: translateY(-2px); }
  80%,100%{ opacity:.2; transform: translateY(0); }
}

.pane-foot .status.waiting .dots span,
.pane-foot .status.running .dots span{
  display:inline-block;
  width:4px; height:4px; margin-left:3px; border-radius:999px;
  background: currentColor;
  animation: dot 1.2s ease-in-out infinite;
}

.pane-foot .status.waiting .dots span:nth-child(2),
.pane-foot .status.running .dots span:nth-child(2){ animation-delay:.2s; }

.pane-foot .status.waiting .dots span:nth-child(3),
.pane-foot .status.running .dots span:nth-child(3){ animation-delay:.4s; }

.pane-foot .status .detail{
  opacity:.85;
  margin-left:6px;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}




/* Modal */
.pc-modal { position: fixed; inset: 0; display: none; z-index: 1000; }
.pc-modal[aria-hidden="false"]{ display:block; }
.pc-modal__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.45); }
.pc-modal__dialog{
  position:relative; margin:5vh auto; max-width:800px; background:var(--bg, #111);
  color:inherit; border:1px solid rgba(255,255,255,.1); border-radius:14px;
  box-shadow:0 20px 50px rgba(0,0,0,.35); padding:14px;
}
.pc-modal__header{ display:flex; align-items:center; justify-content:space-between; }
.pc-modal__close{ background:transparent; border:0; font-size:22px; cursor:pointer; }
.pc-modal__body{ max-height:60vh; overflow:auto; }
.pc-modal__footer{ display:flex; justify-content:flex-end; gap:8px; }

.cx-summary{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:6px 0 10px; }
.cx-table{ width:100%; border-collapse: collapse; font:13px/1.4 ui-monospace, Menlo, Consolas, monospace; }
.cx-table th, .cx-table td{ border-bottom:1px solid rgba(127,127,127,.25); padding:6px 8px; vertical-align: top; }
.cx-table th{ text-align:left; position:sticky; top:0; background:inherit; }
.cx-notes{ opacity:.9; font-size:12px; margin-top:8px; }

/* Optional: align with your ghost buttons */
.btn.btn-ghost{ background:transparent; border:1px solid rgba(127,127,127,.3); }


/* --- Complexity modal + table --- */
.pc-modal { position: fixed; inset: 0; display: none; z-index: 1000; }
.pc-modal[aria-hidden="false"] { display:block; }
.pc-modal__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.45); }
.pc-modal__dialog{
  position:relative; margin:5vh auto; max-width:800px; background:var(--panel, #111);
  color:inherit; border:1px solid rgba(255,255,255,.1); border-radius:14px;
  box-shadow:0 20px 50px rgba(0,0,0,.35); padding:14px;
}
.pc-modal__header{ display:flex; align-items:center; justify-content:space-between; }
.pc-modal__close{ background:transparent; border:0; font-size:22px; cursor:pointer; }
.pc-modal__body{ max-height:60vh; overflow:auto; }
.pc-modal__footer{ display:flex; justify-content:flex-end; gap:8px; }
.cx-summary{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:6px 0 10px; }
.cx-table{ width:100%; border-collapse: collapse; font:13px/1.4 ui-monospace, Menlo, Consolas, monospace; }
.cx-table th, .cx-table td{ border-bottom:1px solid rgba(127,127,127,.25); padding:6px 8px; vertical-align: top; }
.cx-table th{ text-align:left; position:sticky; top:0; background:inherit; }
.cx-notes{ opacity:.9; font-size:12px; margin-top:8px; }

/* --- Icon hygiene --- */
#btnComplexity svg{ display:block; }
#btnComplexity .sr-only{
  position:absolute; width:1px; height:1px; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0;
}


/* One-time subtle pulse when the button first unlocks */
@media (prefers-reduced-motion: no-preference) {
  @keyframes pc-pulse-brief {
    0%   { transform: scale(1); }
    40%  { transform: scale(1.08); }
    100% { transform: scale(1); }
  }
  .btn-pulse {
    animation: pc-pulse-brief 0.9s ease-out;
  }
}

/* Modal footer button consistency */
.pc-modal__footer .btn {
  background: transparent;
  border: 1px solid rgba(127,127,127,.4);
  border-radius: 6px;
  padding: 6px 14px;
  font-size: 14px;
  cursor: pointer;
  transition: background .2s, color .2s;
}
.pc-modal__footer .btn:hover {
  background: rgba(127,127,127,.15);
  color: var(--accent, #4da3ff);
}

/* Space between Complexity + Reset buttons */
#btnComplexity {
  margin-right: 8px;
}

/* Align summary: Time left, Space right */
.cx-summary {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 20px;
}



/* Top-right "X" = ghost icon button w/ hover + focus like the rest */
.pc-modal__close{
  width: 32px; height: 32px;
  display: inline-grid; place-items: center;
  background: transparent;
  border: 1px solid rgba(127,127,127,.35);
  border-radius: 8px;
  color: inherit;
  cursor: pointer;
  transition: background .2s, border-color .2s, color .2s, transform .08s;
}
.pc-modal__close:hover{
  background: rgba(127,127,127,.15);
  border-color: rgba(127,127,127,.55);
  color: var(--accent, #4da3ff);
}
.pc-modal__close:active{ transform: translateY(1px); }
.pc-modal__close:focus-visible{
  outline: 2px solid var(--accent, #4da3ff);
  outline-offset: 2px;
}







/* Center the modal both axes */
.pc-modal{
  position: fixed; inset: 0;
  display: none;            /* hidden by default */
  place-items: center;      /* grid centering */
  z-index: 1000;
}
.pc-modal[aria-hidden="false"]{ display: grid; }

/* Dialog sizing for centered layout */
.pc-modal__dialog{
  margin: 0;                          /* no top margin */
  width: min(90vw, 820px);
  max-height: 80vh;
  overflow: hidden;                   /* header/footer fixed; body scrolls */
  display: flex; flex-direction: column;
}
.pc-modal__body{ overflow: auto; }    /* keep your table scrollable */

/* Summary row: time left, space right */
.cx-summary{
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 20px;
}



/* ====== POLYCODE QUICK FIXES (append at end) ====== */

/* 1) Complexity + Reset buttons: square + brand color when enabled */


/* 2) Modal: center on screen */
.pc-modal{
  position: fixed !important;
  inset: 0 !important;
  display: none;
  place-items: center !important;              /* true centering */
  z-index: 1000;
}
.pc-modal[aria-hidden="false"]{ display: grid !important; }
.pc-modal__dialog{
  margin: 0 !important;                        /* no top offset */
  width: min(90vw, 820px);
  max-height: 80vh;
  display: flex; flex-direction: column;
  overflow: hidden;
  background: var(--panel, #111);
  border: 1px solid var(--panel-border, rgba(255,255,255,.1));
  border-radius: 0 !important;                 /* square dialog */
}


.pc-modal__close:hover{ filter: brightness(1.08); }

/* Footer Close button style & sizing (no overflow) */
.pc-modal__footer .btn{
  border-radius: 0 !important;
  padding: 6px 14px;
  background: var(--btn-bg);
  color: var(--btn-fg);
  border: 1px solid var(--panel-border);
}
.pc-modal__footer .btn:hover{ filter: brightness(1.08); }

/* 4) Summary row: time on left, space on right */
.cx-summary{
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  gap: 20px;
}
.cx-summary > :last-child{
  margin-left: auto; text-align: right;        /* ‚ÄúFinal Space‚Äù to the right */
}

/* 5) Make sure the table/header fonts stay tidy in the modal */
.pc-modal__header h3{ margin: 0; font-weight: 600; }
.cx-table{ font: 13px/1.4 ui-monospace, Menlo, Consolas, monospace; }

.pc-modal__footer .btn{
  display: none !important
}


 #output{ overflow:auto; -webkit-overflow-scrolling:touch; }
#jconsole{
  white-space: pre !important;     /* disable wrapping */
  word-break: normal !important;    /* don‚Äôt break long tokens */
  overflow-wrap: normal !important; /* same */
}


.footer-icons img,
.footer-icons svg,
.footer-icons i {
  display: inline-block;
  vertical-align: middle;
  line-height: 1;      /* reset */
  height: 24px;        /* or your icon size */
  width: 24px;
}

.footer-icons {
  display: flex;
  align-items: center; /* vertically center */
  gap: 10px;           /* spacing between icons */
  padding-bottom: 5px; /* prevent clipping */
}


.footer-icons .fa {
  line-height: 1; 
}



/* Let grid columns shrink even if content is wide */
#leftPanel, #centerPanel, #rightPanel,
.panel, .pane-body, #editor, #output, #jconsole { min-width: 0; }

/* Either wrap console lines ‚Ä¶ */
#jconsole { white-space: pre-wrap; overflow:auto; word-break: break-word; overflow-wrap: anywhere; }
/* ‚Ä¶ or, if you really want pre (no wrap), keep min-width:0 above and still allow scroll */



/* Ensure site footer and its middle column never crop icons */
.site-footer{ overflow:visible; }
.footer-grid{ align-items:center; }
.site-footer .footer-center{ display:flex; align-items:center; gap:8px; line-height:1; }
.site-footer .footer-center .label{ margin-right:6px; }
.site-footer .footer-center .social{
  display:inline-flex; align-items:center; justify-content:center;
  width:28px; height:28px; margin:0 4px; vertical-align:middle;
}
.site-footer .footer-center .social svg{ width:18px; height:18px; }

/* Make sure the stage doesn‚Äôt overlap the footer on short viewports */
.stage{ padding-bottom:8px; }


/* Make the panel (#output) own the scrollbars */
#output{
  overflow: auto;               /* both axes */
  display: block;
}

/* Prevent the <pre> from creating its own scroller */
#jconsole{
  display: inline-block;        /* shrink-to-content for long lines */
  min-width: 100%;              /* but at least fill the viewport width */
  white-space: pre;             /* no wrapping, so horizontal scroll appears */
  overflow: visible;            /* never create a nested scrollbar */
}


#output{ padding:10px 10px 10px 10px !important; }  /* top right bottom left */
#jconsole{ padding:0 !important; }               /* ensure the <pre> adds none */


/* Glow effect for enabled Pyplot button */
/* allow shadows to render outside toolbar buttons */
.pane-head .right-controls,
.right-controls {
  overflow: visible;
}

/* Pyplot button glow */
#btnPlotPreview { position: relative; z-index: 1; }

/* Pyplot button ‚Äî always black, no border */
#btnPlotPreview {
  position: relative;
  z-index: 1;
  border: none !important;
  background: #000 !important;
  color: #fff !important;
}

/* Disabled = still black, just dimmed */
#btnPlotPreview:disabled {
  opacity: .6 !important;
  cursor: not-allowed;
}

/* White glow only when enabled */
@keyframes glowWhite {
  0%, 100% { box-shadow: 0 0 0 rgba(255,255,255,0); }
  50%      { box-shadow: 0 0 12px rgba(255,255,255,0.9),
                       0 0 20px rgba(255,255,255,0.6); }
}

#btnPlotPreview:not([disabled])::after {
  content: "";
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0; /* exactly button size */
  border-radius: inherit;
  pointer-events: none;
  animation: glowWhite 1.2s ease-in-out infinite;
  z-index: -1;
}



/* =========================
   MOBILE RESCUE OVERRIDES
   (append at very end)
   ========================= */

/* 0) Hygiene: avoid duplicate header rules fighting on mobile */
@media (max-width: 1024px){
  /* kill earlier header grid overrides so this block wins */
  .site-header{
    all: unset;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    background: var(--glass);
    border-bottom: 1px solid var(--glass-brd);
    backdrop-filter: blur(10px);
    position: sticky;
    top: 0;
    z-index: 50;
  }
  /* center brand lockup */
  .brand-wrap{ grid-column: 2; justify-self: center; }
  .brand-grid{ column-gap: 10px; row-gap: 2px; }
  .brand-logo{
    width: clamp(36px, 10vw, 48px);
    height: clamp(36px, 10vw, 48px);
  }
  .brand-title2{
    font-size: clamp(18px, 4.8vw, 24px);
    line-height: 1.05;
    font-weight: 400;
    white-space: nowrap;
  }
  .brand-tagline2{
    font-size: clamp(11px, 3.6vw, 13px);
    line-height: 1.1;
    white-space: nowrap;
  }
  .site-nav{
    grid-column: 3;
    justify-self: end;
    display: flex;
    gap: 12px;
  }
}

/* 1) Layout: stack panels vertically, remove resizers on touch */
@media (max-width: 1024px){
  .stage{ padding: 8px 12px; }
  .app{
    display: flex !important;
    flex-direction: column !important;
    gap: 8px !important;
    height: 100% !important;
    min-height: 0 !important;
  }
  .v-resize{ display: none !important; }

  /* left panel collapses by default; toggle via your chevron */
  .left.panel{ display: none; }
  .app:not(.collapsed-left) .left.panel{ display: block; }

  /* consistent heads/controls sizing */
  .pane-head{ padding: 8px 10px; min-height: 40px; }
  .btn{ width: 40px; height: 40px; }
  .select{ font-size: 16px; }

  /* make panels own their scroll, not the page */
  .panel, .pane-body, #editor, #output{ min-height: 0 !important; }
  #editor{ min-height: 46svh; flex: 1 1 0; }
  #output{ min-height: 36svh; flex: 1 1 0; overflow: auto !important; }
}

/* 2) Console/output: single scroll container, no nested scrollers */
@media (max-width: 1024px){
  #output{
    background: transparent !important;
    overflow: auto !important;         /* one scroller */
    -webkit-overflow-scrolling: touch; /* smooth */
    padding: 10px !important;
  }
  #jconsole{
    display: inline-block;
    min-width: 100%;
    white-space: pre;                   /* keep monospace lines */
    overflow: visible !important;       /* no inner scrollbar */
  }
}

/* 3) Footer: never crop icons or wrap awkwardly */
@media (max-width: 640px){
  .site-footer{
    background: var(--glass);
    border-top: 1px solid var(--glass-brd);
    padding: 12px 14px !important;
  }
  .footer-grid{
    grid-template-columns: 1fr;
    row-gap: 10px;
    align-items: center;
  }
  .footer-right{ justify-content: flex-start; flex-wrap: wrap; gap: 12px; }
  .footer-center{ justify-content: flex-start; gap: 8px; }
  .footer-center .social{ width: 28px; height: 28px; }
}

/* 4) Kill conflicting/duplicate button animations on mobile */
@media (max-width: 1024px){
  .btn.idle-attract,
  .btn.idle-attract:disabled{ animation: none !important; box-shadow: none !important; }
  /* keep ONLY state-based glow when active */
  .btn:not(.is-running):not(.is-resetting):not(.attn){ animation: none !important; box-shadow: none !important; }
}

/* 5) Safety: prevent horizontal jiggle & ensure children can shrink */
@media (max-width: 1024px){
  html, body{ overflow-x: hidden; }
  #leftPanel, #centerPanel, #rightPanel,
  .panel, .pane-body, #editor, #output, #jconsole{ min-width: 0 !important; }
}

/* 6) Optional: reduce sticky+blur jank on very low-end devices */
@media (max-width: 640px) and (prefers-reduced-transparency: reduce){
  .site-header{ backdrop-filter: none; background: var(--panel-2); }
}



/* =========================
   MOBILE STACKED MODE (‚â§1024px)
   ========================= */
@media (max-width:1024px){

  /* 0) One column, explicit stacking order */
  .stage{ padding:8px 12px; }
  .app{
    display:flex !important;
    flex-direction:column !important;
    gap:8px !important;
    height:100% !important;
    min-height:0 !important;
  }
  /* order: Header(1) ‚Ä¢ Left(2 when open) ‚Ä¢ Editor(3) ‚Ä¢ Output(4) ‚Ä¢ Footer(5) */
  header.site-header{ order:1; }
  .left.panel{ order:2; }
  .center.panel{ order:3; }
  .right.panel{ order:4; }
  footer.site-footer{ order:5; }

  /* 1) Hide left panel by default; show when .app is NOT collapsed-left */
  .left.panel{ display:none !important; }
  .app:not(.collapsed-left) .left.panel{ display:block !important; }

  /* 2) Kill resizers on touch */
  .v-resize{ display:none !important; }

  /* 3) Ensure children can shrink/scroll (no nested scrollbars) */
  .panel, .pane-body, #editor, #output{ min-height:0 !important; }
  #editor{ min-height:46svh; flex:1 1 0; }
  #output{ min-height:36svh; flex:1 1 0; overflow:auto !important; }
  #jconsole{ display:inline-block; min-width:100%; white-space:pre; overflow:visible !important; }

  /* 4) Compact top navigation (smaller logo + links) */
  .site-header{
    display:grid !important;
    grid-template-columns:1fr auto 1fr !important; /* center brand, right nav */
    align-items:center !important;
    gap:10px !important;
    padding:8px 12px !important;
    background:var(--glass) !important;
    border-bottom:1px solid var(--glass-brd) !important;
    backdrop-filter:blur(10px);
    position:sticky; top:0; z-index:50;
  }
  .brand-wrap{ grid-column:2 !important; justify-self:center !important; }
  .brand-logo{ width:clamp(28px,8vw,36px) !important; height:clamp(28px,8vw,36px) !important; }
  .brand-title2{ font-size:clamp(18px,4.5vw,22px) !important; line-height:1.05 !important; font-weight:400 !important; }
  .brand-tagline2{ font-size:clamp(11px,3.4vw,13px) !important; line-height:1.1 !important; }
  .site-nav{ grid-column:3 !important; justify-self:end !important; display:flex !important; gap:10px !important; }
  .site-nav a, .site-header nav a{
    font-size:12px !important;
    line-height:1 !important;
    text-decoration:underline; text-underline-offset:3px;
  }

  /* 5) Compact panel heads + buttons */
  .pane-head{ padding:8px 10px !important; min-height:38px !important; }
  .btn{ width:36px; height:36px; }
  .select{ font-size:16px; }

  /* 6) Tight footer (bottom navigation smaller, complete) */
  .site-footer{
    padding:10px 12px !important;
    background:var(--glass) !important;
    border-top:1px solid var(--glass-brd) !important;
  }
  .footer-grid{ grid-template-columns:1fr !important; row-gap:8px !important; }
  .footer-left .txt .powered{ font-size:13px !important; }
  .footer-left .txt .subline, .footer-left .txt .siteurl{ font-size:11px !important; }
  .footer-right{ justify-content:flex-start !important; gap:12px !important; flex-wrap:wrap !important; }
  .footer-center{ justify-content:flex-start !important; gap:8px !important; }
  .footer-center .social{ width:26px; height:26px; }
  .footer-logo{ width:22px !important; height:22px !important; }

  /* 7) Safety */
  html, body{ overflow-x:hidden; }
  #leftPanel, #centerPanel, #rightPanel,
  .panel, .pane-body, #editor, #output, #jconsole{ min-width:0 !important; }
}



/* =========================
   STACKED MOBILE v2 (‚â§768px)
   ========================= */
@media (max-width: 768px){

  /* Let the page scroll so the footer is fully reachable */
  html, body { overflow-x: hidden !important; overflow-y: auto !important; }

  /* Outer paddings tighter */
  .stage{ padding:8px 12px !important; }

  /* One-column stack */
  .app{
    display:flex !important;
    flex-direction:column !important;
    gap:8px !important;
    width:100% !important;
    height:auto !important;          /* no forced viewport calc */
    min-height:0 !important;
  }

  /* Order: Top Nav ‚Üí (Left if shown) ‚Üí Editor ‚Üí Output ‚Üí Bottom Nav */
  header.site-header{ order:1; width:100% !important; }
  .left.panel      { order:2; width:100% !important; }
  .center.panel    { order:3; width:100% !important; }
  .right.panel     { order:4; width:100% !important; }
  footer.site-footer{ order:5; width:100% !important; }

  /* Hide LEFT by default; show only when .app DOES NOT have .collapsed-left */
  .left.panel{ display:none !important; }
  .app:not(.collapsed-left) .left.panel{ display:block !important; }

  /* Kill desktop resizers */
  .v-resize{ display:none !important; }

  /* Panels own their scroll; prevent nested scrollers */
  .panel, .pane-body, #editor, #output{ min-height:0 !important; }
  #output{
    overflow:auto !important;
    -webkit-overflow-scrolling:touch;
    background:transparent !important;
  }
  #jconsole{
    display:inline-block; min-width:100%;
    white-space:pre; overflow:visible !important; /* no inner scrollbar */
  }

  /* Safe height clamps (so nothing gets tiny or absurdly tall) */
  #editor{ min-height: clamp(260px, 52svh, 64svh) !important; }
  #output{ min-height: clamp(180px, 34svh, 48svh) !important; }

  /* Compact header + smaller links */
  .site-header{
    display:grid !important;
    grid-template-columns: 1fr auto 1fr !important;  /* center brand, right nav */
    align-items:center !important;
    gap:10px !important;
    padding:8px 12px !important;
    background:var(--glass) !important;
    border-bottom:1px solid var(--glass-brd) !important;
    position:sticky; top:0; z-index:50;
  }
  .brand-wrap{ grid-column:2 !important; justify-self:center !important; }
  .brand-logo{ width:28px !important; height:28px !important; }
  .brand-title2{ font-size:20px !important; line-height:1.05 !important; font-weight:400 !important; }
  .brand-tagline2{ font-size:11px !important; line-height:1.1 !important; }
  .site-nav{ grid-column:3 !important; justify-self:end !important; display:flex !important; gap:10px !important; }
  .site-nav a, .site-header nav a{ font-size:11px !important; line-height:1 !important; text-underline-offset:3px; }

  /* Compact panel headers + buttons */
  .pane-head{ padding:8px 10px !important; min-height:36px !important; }
  .btn{ width:34px; height:34px; }
  .select{ font-size:16px; }

  /* Footer smaller, all items visible */
  .site-footer{
    padding:10px 12px !important;
    background:var(--glass) !important;
    border-top:1px solid var(--glass-brd) !important;
  }
  .footer-grid{ grid-template-columns:1fr !important; row-gap:8px !important; }
  .footer-left .txt .powered{ font-size:12px !important; }
  .footer-left .txt .subline, .footer-left .txt .siteurl{ font-size:10px !important; }
  .footer-right{ justify-content:flex-start !important; gap:10px !important; flex-wrap:wrap !important; }
  .footer-center{ justify-content:flex-start !important; gap:8px !important; }
  .footer-center .social{ width:24px; height:24px; }
  .footer-logo{ width:22px !important; height:22px !important; }

  /* Chevron smaller so it doesn‚Äôt feel bulky on phones */
  .chevron-tab{ width:20px; height:40px; left:4px; }
}

/* Optional: apply the same but a bit looser on tablets */
@media (min-width: 769px) and (max-width: 1024px){
  .app{ display:flex !important; flex-direction:column !important; gap:10px !important; }
  .left.panel{ display:none !important; }
  .app:not(.collapsed-left) .left.panel{ display:block !important; }
  #editor{ min-height: 56svh !important; }
  #output{ min-height: 36svh !important; }
}


/* =========================
   STACK ORDER FIX (‚â§1024px)
   ========================= */
@media (max-width:1024px){

  /* Force one-column flex stack */
  .app{
    display:flex !important;
    flex-direction:column !important;
    gap:8px !important;
    height:auto !important;        /* let panels size naturally */
    min-height:0 !important;
  }

  /* Explicit stacking order */
  header.site-header   { order:1 !important; }
  .left.panel          { order:2 !important; }
  .center.panel        { order:3 !important; }
  .right.panel         { order:4 !important; }
  footer.site-footer   { order:5 !important; }

  /* Left hidden by default */
  .left.panel{ display:none !important; }
  .app:not(.collapsed-left) .left.panel{ display:block !important; }

  /* Kill resizers */
  .v-resize{ display:none !important; }

  /* Editor + Output safe sizes */
  #editor{ min-height: clamp(260px, 52svh, 64svh) !important; }
  #output{ min-height: clamp(180px, 34svh, 48svh) !important; }

  /* Header compact */
  .site-header{
    padding:8px 12px !important;
    grid-template-columns: 1fr auto 1fr !important;
    background:var(--glass) !important;
    border-bottom:1px solid var(--glass-brd) !important;
    position:sticky; top:0; z-index:50;
  }
  .brand-logo{ width:28px !important; height:28px !important; }
  .brand-title2{ font-size:20px !important; }
  .brand-tagline2{ font-size:11px !important; }
  .site-nav a{ font-size:11px !important; }

  /* Footer compact */
  .site-footer{
    padding:10px 12px !important;
    background:var(--glass) !important;
    border-top:1px solid var(--glass-brd) !important;
  }
  .footer-grid{ grid-template-columns:1fr !important; row-gap:8px !important; }
  .footer-right{ justify-content:flex-start !important; flex-wrap:wrap; gap:10px !important; }
}




/* =========================
   MOBILE STACK v3 ‚Äî FIXED TOP HEADER
   ========================= */
@media (max-width:1024px){

  /* 0) Let page scroll; no horizontal jiggle */
  html,body{ overflow-y:auto !important; overflow-x:hidden !important; }

  /* 1) Compact fixed header always at the top */
  :root{ --mhead-h: 52px; } /* header height */
  body > header.site-header{
    position: fixed !important;
    top: 0; left: 0; right: 0;
    z-index: 1000;
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important; /* center brand, right nav */
    align-items: center !important;
    gap: 10px !important;
    padding: 8px 12px !important;
    height: var(--mhead-h) !important;
    background: var(--glass) !important;
    border-bottom: 1px solid var(--glass-brd) !important;
    backdrop-filter: blur(10px);
  }

  /* 2) Push content below the fixed header */
  .stage{ padding-top: calc(var(--mhead-h) + 8px) !important; }

  /* 3) One-column stack + explicit order */
  .app{
    display:flex !important;
    flex-direction:column !important;
    gap:8px !important;
    height:auto !important;   /* allow natural page scroll */
    min-height:0 !important;
  }
  header.site-header{ order:1 !important; }
  .left.panel{ order:2 !important; }
  .center.panel{ order:3 !important; }
  .right.panel{ order:4 !important; }
  footer.site-footer{ order:5 !important; }

  /* Left hidden by default; chevron toggles .collapsed-left on .app */
  .left.panel{ display:none !important; }
  .app:not(.collapsed-left) .left.panel{ display:block !important; }

  /* Remove desktop resizers */
  .v-resize{ display:none !important; }

  /* Editor/Output sizes + single scroll container */
  .panel, .pane-body, #editor, #output{ min-height:0 !important; }
  #editor{ min-height: clamp(260px, 54svh, 62svh) !important; flex:1 1 0; }
  #output{ min-height: clamp(200px, 36svh, 46svh) !important; overflow:auto !important; }
  #jconsole{ display:inline-block; min-width:100%; white-space:pre; overflow:visible !important; }

  /* 4) Smaller brand + links in header */
  .brand-wrap{ grid-column:2 !important; justify-self:center !important; }
  .brand-logo{ width:26px !important; height:26px !important; }
  .brand-title2{ font-size:18px !important; line-height:1.05 !important; font-weight:400 !important; }
  .brand-tagline2{ font-size:10px !important; line-height:1.1 !important; }
  .site-nav{ grid-column:3 !important; justify-self:end !important; display:flex !important; gap:10px !important; }
  .site-nav a, .site-header nav a{ font-size:11px !important; line-height:1 !important; }

  /* 5) Compact footer ‚Äî ensure everything fits */
  .site-footer{
    padding:10px 12px !important;
    background: var(--glass) !important;
    border-top: 1px solid var(--glass-brd) !important;
  }
  .footer-grid{ grid-template-columns:1fr !important; row-gap:8px !important; }
  .footer-right{ justify-content:flex-start !important; gap:10px !important; flex-wrap:wrap !important; }
  .footer-left .txt .powered{ font-size:12px !important; }
  .footer-left .txt .subline, .footer-left .txt .siteurl{ font-size:10px !important; }
  .footer-logo{ width:22px !important; height:22px !important; }
}


/* =========================
   POLYCODE MOBILE v4 PATCH
   ========================= */
@media (max-width:1024px){

  /* --- HEADER: logo left, links right --- */
  body > header.site-header{
    display: grid !important;
    grid-template-columns: auto 1fr auto !important;  /* logo | spacer | nav */
    align-items: center !important;
    gap: 10px !important;
    padding: 8px 12px !important;
  }
  /* your brand block with logo */
  .brand-wrap{ grid-column: 1 !important; justify-self: start !important; }
  .brand-grid{ column-gap: 8px; row-gap: 2px; }
  .brand-logo{ width: 26px !important; height: 26px !important; }
  /* keep title compact */
  .brand-title2{ font-size: 18px !important; line-height: 1.05 !important; font-weight: 400 !important; }
  .brand-tagline2{ font-size: 10px !important; line-height: 1.1 !important; }

  /* header links to the right */
  .site-nav, .site-header nav{
    grid-column: 4 !important; justify-self: end !important;
    display: flex !important; gap: 10px !important; align-items: center !important;
  }
  .site-nav a, .site-header nav a{ font-size: 11px !important; line-height: 1 !important; }

  /* --- EDITOR / OUTPUT: make all buttons visible --- */
  /* allow two-line toolbar if needed, and prevent clipping */
  .pane-head{
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    padding: 8px 10px !important;
    min-height: 36px !important;
    flex-wrap: wrap !important;            /* <‚Äî key: wrap when narrow */
  }
  .pane-head .title{ flex: 0 0 auto; }     /* title doesn‚Äôt stretch */
  .pane-head .right-controls{
    margin-left: auto !important;
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
    flex-wrap: wrap !important;            /* <‚Äî buttons can drop to row 2 */
    overflow: visible !important;          /* keep glows/dropdowns visible */
  }
  .btn{ width: 36px; height: 36px; }       /* tidy size for mobile */

  /* --- FOOTER: left = powered, center = nav links, right = Follow us --- */
  .site-footer{ padding: 10px 12px !important; }
  .footer-grid{
    display: grid !important;
    grid-template-columns: 1fr auto 1fr !important;   /* left | center | right */
    grid-template-areas: "left center right" !important;
    align-items: center !important;
    gap: 12px !important;
  }
  .footer-left  { grid-area: left;  justify-self: start; }
  .footer-right { grid-area: center; justify-self: center;   /* nav links */ }
  .footer-center{ grid-area: right; justify-self: end;       /* Follow us */ }

  /* keep nav links centered even if they wrap */
  .footer-right{
    display: flex; gap: 14px; flex-wrap: wrap; justify-content: center;
    text-align: center;
  }
  /* keep icons to the right neatly */
  .footer-center{ display: flex; gap: 10px; align-items: center; }
  .footer-center .social{ width: 24px; height: 24px; }

  /* small text weights */
  .footer-left .txt .powered{ font-size: 12px !important; }
  .footer-left .txt .subline, .footer-left .txt .siteurl{ font-size: 10px !important; }
}

/* (Optional) ultra-small phones refinement */
@media (max-width: 380px){
  .site-nav a{ font-size: 10px !important; }
  .btn{ width: 34px; height: 34px; }
}




























/* =========================
   POLYCODE FIX PACK ‚Äî 2025-08-29
   Append at end of CSS
   ========================= */

/* --- 0) Hygiene: let children shrink & show their own scrollbars --- */
#leftPanel, #centerPanel, #rightPanel,
.panel, .pane-head, .pane-body, #editor, #output { min-width: 0 !important; }
#output{ overflow:auto !important; -webkit-overflow-scrolling:touch; }

/* --- 1) Editor title must stay on a single line; buttons wrap instead --- */
/* (solves SS4: heading breaking into 2 lines) */
.center .pane-head{ flex-wrap: wrap !important; row-gap: 6px !important; }
.center .pane-head .title{
  min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  flex: 0 1 auto;               /* allow ellipsis rather than wrapping */
}
.center .pane-head .right-controls{
  margin-left: auto !important;
  display: flex !important; flex-wrap: wrap !important; gap: 8px !important;
}

/* --- 2) Prefer shrinking the OUTPUT before shrinking the EDITOR title --- */
@media (max-width: 1280px){
  /* let right panel give up width first */
  #rightPanel{ flex: 0 1 32% !important; }
  #centerPanel{ flex: 1 1 0 !important; }
}

/* --- 3) Auto-hide the LEFT reference pane on narrower screens ------------ */
/* (solves SS5: only left pane visible; editor/output pushed below) */
@media (max-width: 1200px){
  .left.panel{ display:none !important; }
  /* user can still open it with your chevron: remove !important via class */
  .app.show-left .left.panel{ display:block !important; }
}
/* If you already toggle .collapsed-left / .show-left in JS, keep that; this
   rule simply ensures the default at smaller widths is "hidden". */

/* --- 4) Mobile/Tablet: one-column stack in correct order ----------------- */
@media (max-width: 1024px){
  .app{
    display:flex !important; flex-direction:column !important;
    gap:8px !important; height:auto !important; min-height:0 !important;
  }
  header.site-header{ order:1 !important; }
  .left.panel{ order:2 !important; display:none !important; }
  .app.show-left .left.panel{ display:block !important; }  /* when toggled */
  .center.panel{ order:3 !important; }
  .right.panel{ order:4 !important; }
  footer.site-footer{ order:5 !important; }

  /* Comfortable minimum heights */
  #editor{ min-height: clamp(260px, 52svh, 62svh) !important; }
  #output{ min-height: clamp(180px, 34svh, 46svh) !important; }
}

/* --- 5) Header: logo left, links right; never clip; allow wrapping ------- */
/* (solves SS6/SS7: ‚ÄúContact‚Äù half-hidden) */
@media (max-width: 1024px){
  body > header.site-header{
    position: sticky; top: 0; z-index: 100; background: var(--glass);
    border-bottom:1px solid var(--glass-brd);
    display: grid !important;
    grid-template-columns: auto 1fr auto !important; /* logo | spacer | nav */
    align-items: center !important;
    gap: 10px !important; padding: 8px 12px !important;
  }
  .brand-wrap{ grid-column: 1 !important; justify-self: start !important; }
  .site-header nav, .site-nav{
    grid-column: 3 !important; justify-self: end !important;
    display:flex !important; flex-wrap: wrap !important; gap:10px !important;
  }
  .site-header nav a, .site-nav a{
    font-size: 12px !important; line-height: 1 !important;
  }
}

/* --- 6) Footer: keep ‚ÄúFollow us‚Äù on the right; links always visible ------ */
/* (solves SS6/SS7: ‚ÄúFollow us‚Äù/legal links missing) */
.site-footer{ overflow: visible !important; }
.footer-grid{
  display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; gap:12px;
}
.footer-left{ justify-self: start; }
.footer-right{ justify-self: center; display:flex; gap:14px; flex-wrap:wrap; } /* legal links */
.footer-center{ justify-self: end; display:flex; gap:10px; align-items:center; } /* Follow us */

@media (max-width: 640px){
  .footer-grid{ grid-template-columns: 1fr; row-gap:10px; }
  .footer-left  { justify-self: start; }
  .footer-right { justify-self: start; }
  .footer-center{ justify-self: start; }
}

/* --- 7) No nested scrollbars in output; keep single scroller ------------- */
#jconsole{
  display: inline-block; min-width: 100%;
  white-space: pre; overflow: visible !important;
}

/* --- 8) Kill stray ‚Äúidle‚Äù animations that cause clipping on mobile ------- */
@media (max-width:1024px){
  .btn:not(.is-running):not(.is-resetting){ animation:none !important; box-shadow:none !important; }
}

/* --- 9) Last-resort safety: prevent horizontal jiggle -------------------- */
@media (max-width:1024px){
  html, body{ overflow-x:hidden !important; }
}


/* =========================
   POLYCODE ‚Äî ultra-targeted fixes
   (append at very end)
   ========================= */

/* 1) Editor title must stay single-line; buttons can wrap */
#centerPanel .pane-head { flex-wrap: wrap !important; row-gap: 6px !important; }
#centerPanel .pane-head .title{
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  flex: 0 1 auto !important;
}
#centerPanel .pane-head .right-controls{
  margin-left: auto !important;
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 8px !important;
}

/* 2) On smaller screens: auto-hide ONLY the left pane (#leftPanel) */
/*    (editor/output remain visible; user can re-open via .show-left on .app) */
@media (max-width: 1200px){
  #leftPanel{ display: none !important; }
  .app.show-left #leftPanel{ display: block !important; }
}

/* 3) Header: keep logo left, links right, allow wrapping (no truncation) */
@media (max-width: 1024px){
  body > header.site-header{
    display: grid !important;
    grid-template-columns: auto 1fr auto !important; /* logo | spacer | nav */
    align-items: center !important;
    gap: 10px !important;
    padding: 8px 12px !important;
    position: sticky; top: 0; z-index: 100;
    background: var(--glass) !important;
    border-bottom: 1px solid var(--glass-brd) !important;
  }
  body > header.site-header .brand-wrap{
    grid-column: 1 !important; justify-self: start !important;
  }
  body > header.site-header nav,
  body > header.site-header .site-nav{
    grid-column: 3 !important; justify-self: end !important;
    display: flex !important; flex-wrap: wrap !important; gap: 10px !important;
    min-width: 0 !important;
  }
  body > header.site-header nav a,
  body > header.site-header .site-nav a{
    font-size: 12px !important; line-height: 1 !important;
  }
}

/* 4) Footer: always show legal links and ‚ÄúFollow us‚Äù */
.site-footer{ overflow: visible !important; }
.site-footer .footer-grid{
  display: grid !important;
  grid-template-columns: 1fr auto 1fr !important;  /* left | center | right */
  align-items: center !important; gap: 12px !important;
}
.site-footer .footer-left{  justify-self: start !important; }
.site-footer .footer-right{ justify-self: center !important; display:flex !important; gap:14px !important; flex-wrap:wrap !important; }
.site-footer .footer-center{ justify-self: end !important; display:flex !important; gap:10px !important; align-items:center !important; }

@media (max-width: 640px){
  .site-footer .footer-grid{ grid-template-columns: 1fr !important; row-gap: 10px !important; }
  .site-footer .footer-left,
  .site-footer .footer-right,
  .site-footer .footer-center{ justify-self: start !important; }
}





















/* ===== POLYCODE ‚Äî exact-behavior overrides (append at very end) ===== */

/* 0) Prevent clipping; allow children to shrink/scroll */
#leftPanel, #centerPanel, #rightPanel,
.panel, .pane-head, .pane-body, #editor, #output { min-width:0 !important; }
#output{ overflow:auto !important; -webkit-overflow-scrolling:touch; }

/* 1) Editor title stays one line; buttons may wrap */
#centerPanel .pane-head{ flex-wrap:wrap !important; row-gap:6px !important; }
#centerPanel .pane-head .title{
  white-space:nowrap !important; overflow:hidden !important; text-overflow:ellipsis !important;
  flex:0 1 auto !important;
}
#centerPanel .pane-head .right-controls{
  margin-left:auto !important; display:flex !important; flex-wrap:wrap !important; gap:8px !important;
}

/* 2) Desktop squeeze: prefer shrinking Output before harming Editor title */
@media (max-width:1280px){
  #rightPanel{ flex:0 1 32% !important; }   /* Output can give up width */
  #centerPanel{ flex:1 1 0 !important; }
}

/* 3) Auto-hide LEFT pane when space is tight (no JS required) */
@media (max-width:1200px){
  #leftPanel{ display:none !important; }             /* hidden by default */
  .app.show-left #leftPanel{ display:block !important; } /* show if toggled */
}

/* 4) Phone/tablet: one column, explicit order = Header ‚Üí Editor ‚Üí Output ‚Üí Footer */
@media (max-width:1024px){
  .app{ display:flex !important; flex-direction:column !important; gap:8px !important;
        height:auto !important; min-height:0 !important; }
  header.site-header{ order:1 !important; }
  #leftPanel{ order:2 !important; display:none !important; }        /* stays hidden */
  #centerPanel{ order:3 !important; }
  #rightPanel { order:4 !important; }
  footer.site-footer{ order:5 !important; }

  /* Comfortable heights */
  #editor{ min-height: clamp(260px, 52svh, 62svh) !important; }
  #output{ min-height: clamp(180px, 34svh, 46svh) !important; }
}

/* 5) Header: logo LEFT, links RIGHT; never clip (wrap allowed) */
@media (max-width:1024px){
  body > header.site-header{
    display:grid !important;
    grid-template-columns:auto 1fr auto !important; /* logo | spacer | nav */
    align-items:center !important; gap:10px !important;
    padding:8px 12px !important;
    position:sticky; top:0; z-index:100;
    background:var(--glass) !important; border-bottom:1px solid var(--glass-brd) !important;
  }
  body > header.site-header .brand-wrap{ grid-column:1 !important; justify-self:start !important; }
  body > header.site-header nav,
  body > header.site-header .site-nav{
    grid-column:3 !important; justify-self:end !important;
    display:flex !important; flex-wrap:wrap !important; gap:10px !important;
    min-width:0 !important;
  }
  body > header.site-header a{ font-size:12px !important; line-height:1 !important; }
}

/* 6) Footer: center = legal links; right = Follow us; never clipped */
.site-footer{ overflow:visible !important; }
.site-footer .footer-grid{
  display:grid !important;
  grid-template-columns:1fr auto 1fr !important; align-items:center !important; gap:12px !important;
}
.site-footer .footer-left{  justify-self:start !important; }
.site-footer .footer-right{ justify-self:center !important; display:flex !important; gap:14px !important; flex-wrap:wrap !important; }
.site-footer .footer-center{ justify-self:end !important; display:flex !important; gap:10px !important; align-items:center !important; }
@media (max-width:640px){
  .site-footer .footer-grid{ grid-template-columns:1fr !important; row-gap:10px !important; }
  .site-footer .footer-left,
  .site-footer .footer-right,
  .site-footer .footer-center{ justify-self:start !important; }
}


/* =========================
   POLYCODE ‚Äî left-pane collapse + editor toolbar
   (append at very end)
   ========================= */

/* Allow container queries on the editor panel for smarter toolbar behavior */
#centerPanel { container-type: inline-size; }

/* 1) Desktop ‚Üí Compact (hide LEFT, expand EDITOR) ----------------------- */
/* At this width we auto-hide #leftPanel and reflow grid to 2 columns:
      [EDITOR]  [resizer]  [OUTPUT]
   No empty space left behind. */
@media (max-width: 1200px){
  #leftPanel{ display:none !important; }

  /* Rebuild the grid to two columns */
  .app{
    display: grid !important;
    grid-template-columns: minmax(560px, 1fr) 8px minmax(420px, 44%) !important;
    gap: 8px !important;
  }

  /* Ensure panels sit in the new columns */
  #centerPanel{ grid-column: 1 / span 1 !important; }
  #rightPanel { grid-column: 3 / span 1 !important; }

  /* If you have a left-side resizer block, hide it */
  .v-resize.left, .v-resize:first-of-type{ display:none !important; }
}

/* 2) Tablet/Phone ‚Üí Stack: Editor (top) then Output (bottom) ------------ */
@media (max-width: 1024px){
  .app{
    display:flex !important;
    flex-direction:column !important;
    gap:8px !important;
    height:auto !important; min-height:0 !important;
  }
  #leftPanel{ display:none !important; }     /* keep reference hidden by default */
  #centerPanel{ order:3 !important; }
  #rightPanel { order:4 !important; }

  /* Comfortable heights */
  #editor{ min-height: clamp(260px, 52svh, 62svh) !important; }
  #output{ min-height: clamp(180px, 34svh, 46svh) !important; }
}

/* 3) Editor toolbar: title one-line; buttons can wrap ------------------- */
#centerPanel .pane-head{
  display:flex; align-items:center; gap:8px;
  flex-wrap: wrap !important; row-gap: 6px !important;
}
#centerPanel .pane-head .title{
  white-space: nowrap !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  flex: 0 1 auto !important;
  min-width: 0;
}
#centerPanel .pane-head .right-controls{
  margin-left:auto !important;
  display:flex !important; gap:8px !important; flex-wrap:wrap !important;
}

/* ‚Äî Option 1 (auto-shrink to show all): when editor head gets narrower,
      reduce font and button footprint. Uses container queries so it reacts
      to #centerPanel width, not the whole page. */
@container (max-width: 760px){
  #centerPanel .pane-head .title{ font-size: 13px; }
  #centerPanel .pane-head .btn{ width:34px; height:34px; }
}
@container (max-width: 640px){
  #centerPanel .pane-head .title{ font-size: 12px; }
  #centerPanel .pane-head .btn{ width:32px; height:32px; }
}

/* ‚Äî Option 2 (stack buttons vertically): when it‚Äôs really tight, float
      the controls into a neat vertical column aligned to the right. */
@container (max-width: 520px){
  #centerPanel .pane-head{
    align-items:flex-start;
  }
  #centerPanel .pane-head .right-controls{
    flex-direction: column !important;
    align-items: flex-end !important;
    gap: 6px !important;
  }
}

/* 4) Header + Footer polish (wrap, never clip) -------------------------- */
/* Header: logo left, links right, allow wrapping */
@media (max-width: 1024px){
  body > header.site-header{
    display:grid !important;
    grid-template-columns: auto 1fr auto !important; /* logo | spacer | nav */
    align-items:center !important;
    gap:10px !important;
    padding:8px 12px !important;
    position: sticky; top:0; z-index:100;
    background: var(--glass) !important;
    border-bottom: 1px solid var(--glass-brd) !important;
  }
  body > header.site-header .brand-wrap{
    grid-column:1 !important; justify-self:start !important;
  }
  body > header.site-header nav,
  body > header.site-header .site-nav{
    grid-column:3 !important; justify-self:end !important;
    display:flex !important; flex-wrap: wrap !important; gap:10px !important;
    min-width:0 !important;
  }
  body > header.site-header a{ font-size:12px !important; line-height:1 !important; }
}

/* Footer: left=powered, center=legal links, right=Follow us; wrap neatly */
.site-footer{ overflow:visible !important; }
.site-footer .footer-grid{
  display:grid !important;
  grid-template-columns: 1fr auto 1fr !important;
  align-items:center !important; gap:12px !important;
}
.site-footer .footer-left{  justify-self:start !important; }
.site-footer .footer-right{ justify-self:center !important; display:flex !important; gap:14px !important; flex-wrap:wrap !important; }
.site-footer .footer-center{ justify-self:end !important; display:flex !important; gap:10px !important; align-items:center !important; }
@media (max-width: 640px){
  .site-footer .footer-grid{ grid-template-columns:1fr !important; row-gap:10px !important; }
  .site-footer .footer-left,
  .site-footer .footer-right,
  .site-footer .footer-center{ justify-self:start !important; }
}





























/* ===== POLYCODE ‚Ä¢ Overlay panes for small screens + desktop collapses ===== */


/* --- Header & Footer: keep layout; allow wrapping, never clip --- */
.site-header{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:12px;
}
.brand-wrap{ grid-column:1; justify-self:start; }
.site-nav{ grid-column:3; justify-self:end; display:flex; flex-wrap:wrap; gap:12px; min-width:0; }
.site-nav a{ white-space:nowrap; }
@media (max-width: 800px){
  .site-nav a{ font-size:12px; }
}

/* Footer rows: left/right on row 1; centered legal on row 2 */
.footer-grid{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  grid-template-areas:
    "left . right"
    "center center center";
  align-items:center; gap:12px;
}
.footer-left  { grid-area:left;  justify-self:start;  }
.footer-right { grid-area:right; justify-self:end;    display:flex; gap:12px; flex-wrap:wrap; }
.footer-center{ grid-area:center; justify-self:center; display:flex; gap:14px; flex-wrap:wrap; }
@media (max-width: 640px){
  .footer-right a, .footer-center a{ font-size:12px; }
}






















/* ===== POLYCODE ‚Ä¢ FINAL LAYOUT OVERRIDES ===== */
:root{
  --bp-overlay: 1500px;           /* < 1500px = editor-only with slide-in drawers */
  --drawer-w: 520px;              /* max width of slide-in panels on small screens */
  --w-left: 280px;                /* desktop left width */
  --w-right: minmax(360px,42%);   /* desktop right width */
  --g-l: 8px;                     /* gap left of editor */
  --g-r: 8px;                     /* gap right of editor */
}

/* Desktop grid driven by CSS variables */
.app{
  position: relative;
  display: grid;
  grid-template-columns: var(--w-left) var(--g-l) 1fr var(--g-r) var(--w-right);
  grid-template-rows: 1fr;
  height: 100%;
  min-height: 0;
}
.left.panel  { grid-column: 1; }
.v-resize        { grid-column: 2; }
.center.panel{ grid-column: 3; display:flex; flex-direction:column; min-height:0; }
.v-resize.right  { grid-column: 4; }
.right.panel { grid-column: 5; display:flex; flex-direction:column; min-height:0; }
#editor, #output { flex: 1 1 0; min-height: 0; }

/* Desktop collapse behaviour (buttons toggle these classes) */
.app.collapsed-left  { --w-left: 0px; --g-l: 0; }
.app.collapsed-right { --w-right: 0px; --g-r: 0; }
.app.collapsed-left  .v-resize       { display:none !important; }
.app.collapsed-right .v-resize.right { display:none !important; }

/* ===== Overlay mode: < 1500px -> editor only; left/right as drawers ===== */
@media (max-width: 1500px){
  .app{
    grid-template-columns: 1fr; /* only the editor column remains */
    --w-left: 0; --g-l: 0;
    --w-right: 0; --g-r: 0;
  }

  /* hide resizers and side panels by default */
  .v-resize, #leftPanel, #rightPanel{ display:none !important; }

  /* editor stays visible and fills */
  .center.panel { grid-column: 1 !important; }

  /* show left drawer */
  .app.show-left #leftPanel{
    display:flex !important;
    position:absolute; inset:0 auto 0 0;
    width: min(var(--drawer-w), 92vw);
    z-index: 60;
  }
  /* show right drawer */
  .app.show-right #rightPanel{
    display:flex !important;
    position:absolute; inset:0 0 0 auto;
    width: min(var(--drawer-w), 92vw);
    z-index: 60;
  }
  /* dim center when a drawer is open */
  .app.show-left::after,
  .app.show-right::after{
    content:""; position:absolute; inset:0;
    background: rgba(0,0,0,.45);
    z-index: 55;
  }
}

/* Side buttons ‚Äî positioned relative to .app (works desktop + overlay) */
.app{ overflow: visible; }
.chevron-tab{
  position: absolute; top: 50%; transform: translateY(-50%);
  z-index: 70;
  width: 28px; height: 48px;
  display: grid; place-items: center;
  border: 1px solid var(--glass-brd, rgba(255,255,255,.12));
  background: var(--glass, rgba(255,255,255,.05));
  cursor: pointer;
}
.chevron-tab.left  { left: 6px; }
.chevron-tab.right { right: 6px; }

/* Editor toolbar: title must remain on one line; buttons may wrap */
.center .pane-head .title{
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.center .pane-head .right-controls{
  flex-wrap: wrap; row-gap: 6px; overflow: visible;
}

/* Header: logo left, links right; shrink text on small screens, never cut off */
body > header.site-header{
  display:flex !important; align-items:center !important; justify-content:space-between !important;
  padding:10px 16px !important;
  background: var(--glass) !important;
  border-bottom: 1px solid var(--glass-brd) !important;
  position: sticky; top:0; z-index:50;
}
.site-header .site-nav{ display:flex; gap:16px; flex-wrap:wrap; white-space:nowrap; }
.site-header .site-nav a{ text-decoration: underline; text-underline-offset:3px; }
.brand-title2{ font-size: clamp(20px, 2.4vw, 28px) !important; }
.site-header .site-nav a{ font-size: clamp(12px, 1.3vw, 14px) !important; }

/* Footer: left = ‚Äúpowered by‚Äù, right = Follow us, legal centered below on small */
.footer-grid{ grid-template-columns: 1fr auto 1fr; }
@media (max-width: 1024px){
  .footer-grid{
    display:grid !important;
    grid-template-columns: 1fr auto;
    grid-template-areas:
      "left center"
      "legal legal";
    row-gap:10px;
  }
  .footer-left  { grid-area:left; }
  .footer-center{ grid-area:center; justify-self:end; }
  .footer-right { grid-area:legal;  justify-self:center; }
}




/* === Footer: center legal links on large screens === */
.site-footer .footer-grid{
  display:grid !important;
  grid-template-columns: 1fr auto 1fr !important;  /* left | legal | follow */
  align-items:center !important;
  gap:12px !important;
}
.site-footer .footer-left{  justify-self:start !important; }
.site-footer .footer-right{ /* legal links */
  justify-self:center !important;
  display:flex !important; gap:14px !important; flex-wrap:wrap !important;
}
.site-footer .footer-center{ /* follow us */
  justify-self:end !important;
  display:flex !important; gap:10px !important; align-items:center !important;
}
@media (max-width:640px){
  .site-footer .footer-grid{ grid-template-columns:1fr !important; row-gap:10px !important; }
  .site-footer .footer-left,
  .site-footer .footer-right,
  .site-footer .footer-center{ justify-self:start !important; }
}



/* === Side chevrons: thinner, glow, clear state === */
:root{ --chev-w:22px; --chev-h:44px; }

.chevron-tab{
  width:var(--chev-w); height:var(--chev-h);
  border-radius:6px;
  background:var(--glass);
  border:1px solid var(--glass-brd);
  display:grid; place-items:center;
  transition: box-shadow .2s ease, background .2s ease, transform .2s ease;
  color: var(--text);
}
.chevron-tab:hover{
  background: color-mix(in oklab, var(--glass), white 6%);
  box-shadow: 0 0 12px color-mix(in oklab, var(--brand), transparent 40%);
}
@keyframes chevGlow {
  0%,100% { box-shadow: 0 0 0 rgba(46,91,234,0); }
  50%     { box-shadow: 0 0 14px rgba(46,91,234,.7); }
}
.chevron-tab:not(:disabled):hover{ animation: chevGlow 1.2s ease-in-out infinite; }

.chevron-tab svg{
  width:14px; height:14px; fill: currentColor;
  transition: transform .22s ease;
}

/* Arrow orientation by state (works for desktop + overlay) */
/* LEFT: when visible -> arrow points left (<) to collapse; collapsed -> arrow points right (>) to open */
.chevron-tab.left svg{ transform: rotate(180deg); }             /* visible */
.app.collapsed-left .chevron-tab.left svg{ transform: rotate(0); }
.app.show-left       .chevron-tab.left svg{ transform: rotate(180deg); }

/* RIGHT: when visible -> arrow points right (>) to collapse; collapsed/open-drawer -> arrow points left (<) to open/close */
.chevron-tab.right svg{ transform: rotate(0); }                  /* visible */
.app.collapsed-right .chevron-tab.right svg{ transform: rotate(180deg); }
.app.show-right      .chevron-tab.right svg{ transform: rotate(180deg); }






/* ==== FOOTER ‚Ä¢ Row1: actions | Row2: legal (right-aligned) ==== */
.site-footer .footer-grid{
  display:grid !important;
  grid-template-columns: 1fr auto !important;
  grid-template-areas:
    "left actions"
    "left legal";
  align-items:center !important;
  gap:12px !important;
}

/* Left block (powered by‚Ä¶) */
.site-footer .footer-left{
  grid-area:left !important;
  justify-self:start !important;
}

/* Top-right actions = Follow us (+ any CTA buttons you place here) */
.site-footer .footer-center{
  grid-area:actions !important;
  justify-self:end !important;
  display:flex !important; align-items:center !important; gap:12px !important;
}

/* Bottom-right = legal links */
.site-footer .footer-right{
  grid-area:legal !important;
  justify-self:end !important;
  display:flex !important; gap:14px !important; flex-wrap:wrap !important;
}

/* Small screens: simple vertical stack (everything visible) */
@media (max-width:640px){
  .site-footer .footer-grid{
    grid-template-columns:1fr !important;
    grid-template-areas:
      "left"
      "actions"
      "legal";
    row-gap:10px !important;
  }
  .site-footer .footer-left,
  .site-footer .footer-center,
  .site-footer .footer-right{ justify-self:start !important; }
}



/* ==== CHEVRONS ‚Ä¢ glassy pill + white glow + clear state ==== */
:root{ --chev-w: 30px; --chev-h: 54px; }

.chevron-tab{
  width:var(--chev-w); height:var(--chev-h);
  display:grid; place-items:center;
  position:absolute; top:50%; transform:translateY(-50%);
  z-index:70;
  border-radius:10px;
  background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.16);
  backdrop-filter: blur(8px);
  color:#fff;                      /* arrow + glow are white */
  cursor:pointer;
  transition: transform .18s ease, box-shadow .2s ease, background .2s ease;
  box-shadow: 0 6px 18px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.10);
}
.chevron-tab.left  { left:6px; }
.chevron-tab.right { right:6px; }

/* Professional arrow glyph (no extra markup needed) */
.chevron-tab::before{
  content:""; display:block; width:14px; height:14px; line-height:1;
  font:900 16px/1 ui-sans-serif,system-ui;
}
.chevron-tab.left::before  { content:"‚ùÆ"; }  /* visible -> collapse left */
.chevron-tab.right::before { content:"‚ùØ"; }  /* visible -> collapse right */

/* Collapsed state (desktop) -> flip arrows to indicate ‚Äúopen‚Äù direction */
.app.collapsed-left  .chevron-tab.left::before  { content:"‚ùØ"; }
.app.collapsed-right .chevron-tab.right::before { content:"‚ùÆ"; }

/* Overlay drawers: when opened, the panel is visible (same arrows as visible desktop) */
.app.show-left  .chevron-tab.left::before  { content:"‚ùÆ"; }
.app.show-right .chevron-tab.right::before { content:"‚ùØ"; }

/* White pulse glow and tiny nudge on hover/focus */
@keyframes whitePulse {
  0%,100% { box-shadow: 0 0 0 rgba(255,255,255,0); }
  50%     { box-shadow: 0 0 14px rgba(255,255,255,.95), 0 0 26px rgba(255,255,255,.45); }
}
.chevron-tab:hover,
.chevron-tab:focus-visible{
  animation:whitePulse 1.1s ease-in-out infinite;
  transform: translateY(-50%) translateX(0) scale(1.02);
  outline: none;
}

/* Remove any older rule that mirrored the right arrow via scaleX(-1) */
.chevron-tab.right{ transform: translateY(-50%); }

/* Chevron hygiene: show only the SVG, never any fallback text */
.chevron-tab{
  display:grid; place-items:center;
  font-size:0; line-height:0;      /* hides stray text nodes */
  overflow:hidden;
}
.chevron-tab > *:not(svg){ display:none !important; } /* hide any spans/text */
.chevron-tab svg{ width:18px; height:18px; transition:transform .18s ease; }

/* Optional: rotate icon when expanded/collapsed */
.chevron-tab[aria-expanded="true"] svg{ transform: rotate(180deg); }







/* --- CHEVRONS: nuke any inner markup/text; draw our own glyph --- */
.chevron-tab *{ display:none !important; }     /* hide any spans/text/svg */
.chevron-tab{ font-size:0 !important; line-height:0 !important; } /* hide text nodes */

.chevron-tab::before{
  content:""; display:block; font-size:18px; line-height:1;
  /* we already styled the pill; this just draws the arrow */
}
.chevron-tab.left::before  { content:"‚ùÆ"; }   /* collapse-left / open-right */
.chevron-tab.right::before { content:"‚ùØ"; }   /* collapse-right / open-left */

/* keep the white glow + glass you already like */
.chevron-tab{
  width:30px; height:54px; position:absolute; top:50%; transform:translateY(-50%);
  border-radius:10px; backdrop-filter:blur(8px);
  border:1px solid rgba(255,255,255,.16);
  background:linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.04));
  color:#fff; box-shadow:0 6px 18px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.10);
  transition:transform .18s, box-shadow .2s, background .2s;
  z-index:70;  /* above overlay dimmer */
}
.chevron-tab.left{ left:6px; }
.chevron-tab.right{ right:6px; }

@keyframes whitePulse {
  0%,100%{ box-shadow:0 0 0 rgba(255,255,255,0); }
  50%    { box-shadow:0 0 14px rgba(255,255,255,.95), 0 0 26px rgba(255,255,255,.45); }
}
.chevron-tab:hover,
.chevron-tab:focus-visible{ animation:whitePulse 1.1s ease-in-out infinite; outline:none; }

/* arrow orientation on state */
.app.collapsed-left  .chevron-tab.left::before  { content:"‚ùØ"; }
.app.collapsed-right .chevron-tab.right::before { content:"‚ùÆ"; }
.app.show-left  .chevron-tab.left::before  { content:"‚ùÆ"; }
.app.show-right .chevron-tab.right::before { content:"‚ùØ"; }




/* ---------- Chevron tabs: transparent, large arrow, theme-aware glow ---------- */
:root{
  --chev-size: 34px;                       /* arrow size */
  --chev-hit-w: 48px;                      /* invisible button width */
  --chev-hit-h: 96px;                      /* invisible button height */
  --chev-fg: #fff;                         /* arrow color (dark theme default) */
  --chev-glow: rgba(255,255,255,0.45);     /* glow for dark theme */
}
body.light{
  --chev-fg: #000;                         /* arrow color on light theme */
  --chev-glow: rgba(0,0,0,0.35);           /* glow for light theme */
}

.chevron-tab{
  /* keep your positioning (absolute at panel edge) */
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--chev-hit-w);
  height: var(--chev-hit-h);
  padding: 0;
  margin: 0;
  background: transparent !important;      /* transparent button */
  border: 0 !important;
  color: var(--chev-fg);                   /* arrow uses currentColor */
  cursor: pointer;
  user-select: none;
  outline: none;
}

.chevron-tab::before{
  content: "";
  width: var(--chev-size);
  height: var(--chev-size);
  background: currentColor;                /* arrow fill */
  /* Left chevron SVG (we mirror it for the right side below) */
  -webkit-mask: url('data:image/svg+xml;utf8,\
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\
  <path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>') center / contain no-repeat;
          mask: url('data:image/svg+xml;utf8,\
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\
  <path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>') center / contain no-repeat;
  filter: drop-shadow(0 0 2px currentcolor);
  opacity: 0.95;
  transition: transform .15s ease, filter .15s ease, opacity .15s ease;
}

/* Right tab = mirror the left-arrow */
.chevron-tab.right::before{
  transform: scaleX(-1);
}

/* Hover/active/focus polish */
.chevron-tab:hover::before{
  filter: drop-shadow(0 0 8px var(--chev-glow));
  opacity: 1;
  transform: translateX(1px) scale(1.08);
}
.chevron-tab.right:hover::before{
  transform: translateX(-1px) scale(1.08) scaleX(-1);
}
.chevron-tab:active::before{
  transform: scale(0.98) translateY(1px);
}

/* Keyboard focus ring without a box background */
.chevron-tab:focus-visible{
  box-shadow: 0 0 0 2px currentcolor inset;
  border-radius: 999px;
}

/* Optional: flip arrow to indicate "expand" when a panel is collapsed */
.app.collapsed-left  .chevron-tab.left::before  { transform: scaleX(-1); } /* points right */
.app.collapsed-right .chevron-tab.right::before { transform: none; }       /* points left */




/* Base desktop grid */
.app {
  --L: 280px;
  --C: 1fr;
  --R: 360px;
  grid-template-columns: var(--L) 8px var(--C) 8px var(--R);
}

/* Collapse flags just change vars */
.app.collapsed-left  { --L: 0px; }
.app.collapsed-right { --R: 0px; }

/* If both are collapsed, center fills */
.app.collapsed-left.collapsed-right { --L: 0px; --R: 0px; }

/* When both flags are present, force both edges to 0 */
.app.collapsed-left.collapsed-right {
  grid-template-columns: 0px 8px 1fr 8px 0px !important;
}






