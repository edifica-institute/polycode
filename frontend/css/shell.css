:root{
  --bg: #ffffff;
  --fg: #1f2937;
  --muted: #6b7280;
  --ring: #e5e7eb;
  --brand: #111827;
  --accent: #2563eb;
  --accent-weak:#c7d2fe;
  --surface:#f8fafc;
  --shadow: 0 6px 18px rgba(0,0,0,.08);
}

body.theme-dark{
  --bg: #0b0f17;
  --fg: #e5e7eb;
  --muted: #9aa3b2;
  --ring: #1f2937;
  --brand: #e5e7eb;
  --accent: #60a5fa;
  --accent-weak:#0b1220;
  --surface:#0f172a;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
}

/* Reset */
*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0; font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background: var(--bg); color: var(--fg);
}

/* Topbar */
.topbar{
  position: sticky; top:0; z-index: 30;
  background: linear-gradient(180deg, rgba(124,58,237,.07), transparent);
  backdrop-filter: blur(4px);
  border-bottom: 1px solid var(--ring);
  padding: 8px 14px;
  display:flex; align-items:center; justify-content:space-between;
}
.brand{ display:flex; align-items:center; gap:12px; }
.logo-ring{
  width:34px; height:34px; border-radius:999px;
  border: 1px solid var(--ring);
  display:grid; place-items:center; overflow:hidden; background: transparent;
}
.logo-ring img{
  width:100%; height:100%; object-fit: cover;
  /* If the source PNG has white bg, this masks it to a circle */
  border-radius:999px;
}
.brand-text{ display:flex; flex-direction:column; line-height:1.1; }
.brand-text strong{ color: var(--brand); font-weight:700; letter-spacing:.3px; }
.brand-text .powered{ color: var(--muted); margin-top:2px; } /* (4) next line */

/* Menu */
.menu a{
  color: var(--fg); text-decoration:none; margin-left:16px;
  opacity:.9;
}
.menu a:hover{ opacity:1; text-decoration: underline; }

/* Shell layout */
.shell{
  display:grid;
  grid-template-columns: 220px 1fr 6px minmax(320px, 42%);
  grid-template-rows: minmax(0,1fr);
  gap:0;
  height: calc(100vh - 58px);
  overflow:hidden;
}

/* Panes */
.pane{
  display:flex; flex-direction:column; min-width:0; background: var(--surface);
  border-right: 1px solid var(--ring);
}
.pane-right{ border-left: 1px solid var(--ring); }
.pane-head{
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border-bottom:1px solid var(--ring);
  background: var(--bg);
}
.pane-title{ font-weight:600; }
.pane-body{ padding:10px; overflow:auto; }
.pane-foot{
  border-top:1px solid var(--ring);
  padding:6px 10px;
  position: relative;
}
.pane-foot small{
  position: relative; top: -2px;  /* (3) nudge slightly upward */
  color: var(--muted);
}

/* Buttons */
.btn{
  border: 1px solid var(--ring); background: var(--bg); color: var(--fg);
  padding: 6px 12px; border-radius: 999px; cursor:pointer;
  box-shadow: var(--shadow); transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease;
}
.btn.primary{ background: var(--accent); color:white; border-color: transparent; }
.btn.primary:hover{ filter: brightness(1.05); }
.btn.icon{ width:34px; height:34px; padding:0; display:grid; place-items:center; }
.btn.ghost{ background: transparent; box-shadow:none; }
.btn.sm{ font-size:12px; padding:4px 8px; }

.btn:active{ transform: translateY(1px); }

/* (2) Active glow for Run/Reset */
@keyframes btnGlow {
  from { box-shadow: 0 0 0 rgba(99,102,241,0.0), 0 0 0 rgba(99,102,241,0.0); }
  50% { box-shadow: 0 0 20px rgba(99,102,241,0.45), 0 0 40px rgba(99,102,241,0.20); }
  to { box-shadow: 0 0 0 rgba(99,102,241,0.0), 0 0 0 rgba(99,102,241,0.0); }
}
.btn[data-glow="on"]{ animation: btnGlow 1.2s ease-in-out infinite; }

/* Editor */
.editor-wrap{
  height:100%; display:flex; flex-direction:column;
}
#sql-editor{
  flex:1; min-height: 260px;
  width:100%; resize:none;
  background: var(--bg); color: var(--fg);
  border: 1px solid var(--ring);
  border-radius: 12px; padding: 12px 14px;
  font: 13px/1.45 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  outline: none;
}

/* Splitter */
.splitter{
  background: var(--ring); cursor: col-resize;
}
.splitter:hover{ background: var(--accent-weak); }

/* Screen / Output */
.pane-screen{ background: var(--bg); }
.screen-output{
  border: 1px dashed var(--ring);
  border-radius: 12px; padding: 12px; min-height: 120px;
  white-space: pre-wrap; word-break: break-word;
}

/* Collapsed left panel */
.pane-left.collapsed{
  width: 0 !important; min-width:0 !important; border-right:none;
}
.pane-left.collapsed .pane-head,
.pane-left.collapsed .pane-body,
.pane-left.collapsed .pane-foot{ display:none; }

/* Responsive */
@media (max-width: 900px){
  .shell{
    grid-template-columns: 54px 1fr 6px minmax(280px, 45%);
  }
  .pane-left:not(.collapsed){ width:54px; }
  .pane-left:not(.collapsed) .pane-body{ display:none; }
  .pane-left:not(.collapsed) .pane-foot{ display:none; }
}
