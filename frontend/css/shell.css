/* ===== Theme (dark gray / light) ===== */
:root{
  color-scheme: dark;
  --bg:#16181b;         /* dark gray (not pitch black) */
  --panel:#1e2024;      /* panel surface */
  --panel-2:#1a1c1f;    /* header/footer bands */
  --border:#2b2f34;
  --muted:#aeb5bd;
  --brand:#2e5bea;
  --ok:#7dffa0; --err:#ff8b8b; --link:#9ecbff;
  --glass: rgba(255,255,255,.05); --glass-brd: rgba(255,255,255,.12);
  --text:#e9edf3;
  --shadow-3d: 0 24px 60px rgba(0,0,0,.35), 0 10px 24px rgba(0,0,0,.22);
}
body.light{
  color-scheme: light;
  --bg:#eef2f7;
  --panel:#ffffff;
  --panel-2:#f1f4f9;
  --border:#d7dbe2;
  --muted:#6b7280;
  --brand:#2457ff;
  --ok:#22985a; --err:#cc2f2f; --link:#204ecf;
  --glass: rgba(0,0,0,.05); --glass-brd: rgba(0,0,0,.12);
  --text:#0b0b0b;
  --shadow-3d: 0 24px 60px rgba(0,0,0,.12), 0 10px 24px rgba(0,0,0,.08);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{ margin:0; background:var(--bg); color:var(--text);
      font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }

/* ===== Header / Footer (taller, contrasting) ===== */
.site-header{
  display:flex; align-items:flex-start; gap:14px;
  padding:26px 24px; background:var(--panel-2);
  border-bottom:1px solid var(--border); box-shadow:var(--shadow-3d);
}
.site-header .logo{ display:flex; align-items:center; gap:12px; }
.site-header .logo img{
  width:52px; height:52px; border-radius:50%;
  object-fit:contain; background:transparent;
}      /* (15) bigger logo */
.site-header .brand{ line-height:1.05; }
.brand .title{ font-weight:800; font-size:26px; }
.brand{ display:flex; flex-direction:column; }
.brand .powered{ margin-top:6px; display:block; }
.site-header nav{ margin-left:auto; display:flex; gap:20px; padding-top:6px; }
.site-header nav a{ color:var(--text); text-decoration:underline; text-underline-offset:3px; }
.site-header nav a:hover{ color:var(--brand); }

/* stage gives the outer gap and keeps footer visible */
.stage{ padding:10px 12px 18px; }

/* ===== App layout (grid with narrow gaps; square look) ===== */
.app{
  display:grid;
  grid-template-columns: 280px 8px minmax(360px,1fr) 8px minmax(360px, 42%);
  grid-template-rows: calc(100vh - 220px);
  gap:5px;                                /* (10) tighter gaps */
}
.app.collapsed-left{ grid-template-columns: 0 0 minmax(560px,1fr) 8px minmax(340px,42%); }

/* ===== Panel (square + elevated + glassy head) ===== */
.panel{
  background: linear-gradient(180deg, var(--panel) 0%, color-mix(in oklab, var(--panel), #000 4%) 100%);
  border:1px solid var(--border);
  border-radius:4px;                        /* square (10) */
  overflow:hidden;
  box-shadow: var(--shadow-3d);             /* (11) more elevated */
}
.pane-head{
  display:flex; align-items:center; gap:10px;
  padding:12px 12px;
  background:var(--glass); border-bottom:1px solid var(--glass-brd);
  backdrop-filter: blur(10px);
  font-weight:500;                          /* (1) no heavy bold */
}
.pane-head .title{ font-weight:500; }

/* Square buttons */
.btn{
  width:36px; height:36px; padding:0; border-radius:4px;    /* square (10) */
  border:1px solid var(--glass-brd); background:var(--glass); color:var(--text);
  cursor:pointer; font-weight:800; display:inline-grid; place-items:center;
  box-shadow: 0 10px 22px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.06);
}
.btn.primary{ background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.05)); border-color:transparent; }
.btn:disabled{ opacity:.6; cursor:not-allowed; }

/* Run / Reset animation cues (7) */
@keyframes pulse { 0%{transform:scale(1);} 50%{transform:scale(1.08);} 100%{transform:scale(1);} }
.btn.is-running{ animation:pulse .9s ease-in-out infinite; }
@keyframes spinReset { to{transform:rotate(360deg);} }
.btn.is-resetting svg{ animation:spinReset .7s linear infinite; }

/* Icons in buttons */
.btn svg{ width:18px; height:18px; fill:var(--text); }

/* Theme icon (3) smaller) */
.theme-btn{ width:36px; height:36px; }

/* Select in heads / left pane */
.select{
  background:var(--panel); color:var(--text);
  border:1px solid var(--border);
  border-radius:4px; padding:8px 10px; width:100%;
}
.select option{ background:var(--panel); color:var(--text); }   /* (5) visible in dark */

/* Left panel */
.left.panel{ grid-column:1 / span 1; display:flex; flex-direction:column; }
.left .pane-head .title{ display:none; }                        /* (12) remove "SQL" text */
.left .pane-head .select{ max-width:100%; }                     /* (1) full width dropdown in head */
.left .pane-body{ padding:10px 12px; height:100%; overflow:auto; }

/* Center panel (editor) */
.center.panel{ grid-column:3 / span 1; display:flex; flex-direction:column; }
.center .pane-head .title{ }
.center .pane-head .right-controls{ margin-left:auto; display:flex; gap:8px; align-items:center; }
#editor{ flex:1; }

/* Right panel (screen) */
.right.panel{ grid-column:5 / span 1; display:flex; flex-direction:column; }
#output{ flex:1; overflow:auto; padding:12px; }

/* Resizers (2,14) */
.v-resize{ width:8px; cursor:col-resize; }
.v-resize div{ width:100%; height:100%; background:transparent; }
.v-resize div:hover{ background:var(--glass); }

/* Frozen tone (6) single tint for all frozen panels) */
.panel.frozen{ filter:saturate(.85) brightness(.92); }
.panel.frozen .pane-head{ filter:grayscale(.2); }
.screen-dim{ opacity:.55; pointer-events:none; }

/* Links / footer */
a{ color:var(--link); text-decoration:underline; text-underline-offset:3px; }
a:hover{ color:#ffa043; }   

.site-footer{
  margin-top:12px; padding:18px 24px; background:var(--panel-2);
  border-top:1px solid var(--border); box-shadow:var(--shadow-3d);
  position:relative; z-index:2;             /* (4) stay above OS/taskbar */
}
.footer-tagline{ color:var(--muted); margin-bottom:8px; }
.footer-row{ display:flex; align-items:center; justify-content:space-between; }
.footer-row .legal a{ margin-right:14px; }

/* Social icons brighter in dark (8) */
.footer-row .social svg{ width:18px; height:18px; fill:color-mix(in oklab, var(--text), #fff 20%); }
.footer-row .social a:hover svg{ fill:var(--text); }

/* Floating chevron */
.chevron-tab{
  position:fixed; left:6px; top:50%; transform:translateY(-50%);
  width:24px; height:46px; display:flex; align-items:center; justify-content:center;
  border-radius:4px; background:var(--glass); border:1px solid var(--glass-brd);
  backdrop-filter: blur(8px); cursor:pointer; z-index:50;
}
.chevron-tab svg{ width:16px; height:16px; fill:var(--text); }


.panel.frozen{
  background: color-mix(in oklab, var(--panel), #777 12%);
  border-color: color-mix(in oklab, var(--border), #999 18%);
  color: gray;
}
body.light .panel.frozen{
  background: color-mix(in oklab, var(--panel), #000 6%);
  border-color: color-mix(in oklab, var(--border), #000 10%);
}

@keyframes glow {
  0%{ box-shadow:0 0 0 rgba(46,91,234,0); }
  50%{ box-shadow:0 0 18px rgba(46,91,234,.75); }
  100%{ box-shadow:0 0 0 rgba(46,91,234,0); }
}
@keyframes glowGreen {
  0%{ box-shadow:0 0 0 rgba(125,255,160,0); }
  50%{ box-shadow:0 0 18px rgba(125,255,160,.75); }
  100%{ box-shadow:0 0 0 rgba(125,255,160,0); }
}
.btn.is-running{ animation:glow 1.2s ease-in-out infinite; }
.btn.is-resetting{ animation:glowGreen 1.2s ease-in-out 2; } /* two pulses */
/* keep disabled styling but do NOT kill animations */
.btn:disabled{
  opacity:.6;
  cursor:not-allowed;
}

/* Allow glow even when disabled */
.btn.is-running,
.btn.is-running:disabled{
  animation:glow 1.2s ease-in-out infinite;
}
.btn.is-resetting,
.btn.is-resetting:disabled{
  animation:glowGreen 1.2s ease-in-out 2;
}



.pane-foot{
  border-top:1px solid var(--glass-brd);
  padding:8px 10px;
  background:var(--glass);
  font-size:12.5px;
}
.pane-foot .msg{ opacity:.92; }

/* green in dark, blue in light */
.pane-foot .msg{ color:#83ffa6; }
body.light .pane-foot .msg{ color:#2457ff; }

/* site footer slightly higher (3) */
.site-footer{ padding:22px 24px; }

/* --- Continuous glow colors --- */
@keyframes glowBlue {
  0%, 100% { box-shadow: 0 0 0px   rgba(59,130,246,.0), 0 0 0px rgba(59,130,246,.0); }
  50%      { box-shadow: 0 0 16px  rgba(59,130,246,.6), 0 0 28px rgba(59,130,246,.35); }
}
@keyframes glowGreen {
  0%, 100% { box-shadow: 0 0 0px   rgba(34,197,94,.0),  0 0 0px rgba(34,197,94,.0); }
  50%      { box-shadow: 0 0 16px  rgba(34,197,94,.6),  0 0 28px rgba(34,197,94,.35); }
}

/* --- Subtle shake using transforms (no layout shift) --- */
@keyframes shake {
  0%   { transform: translateX(0) rotate(0deg); }
  20%  { transform: translateX(-1px) rotate(-0.4deg); }
  40%  { transform: translateX(1px) rotate(0.4deg); }
  60%  { transform: translateX(-1px) rotate(-0.4deg); }
  80%  { transform: translateX(1px) rotate(0.4deg); }
  100% { transform: translateX(0) rotate(0deg); }
}

/* --- Let disabled buttons still animate --- */
.btn:disabled{
  opacity:.6;
  cursor:not-allowed;
}

/* --- RUN active: continuous blue glow + subtle shake --- */
.btn.is-running,
.btn.is-running:disabled{
  /* two animations at once */
  animation:
    glowBlue 1.2s ease-in-out infinite,
    shake    .6s  linear       infinite;
  will-change: transform, box-shadow;
}

/* --- RESET active: continuous green glow + subtle shake --- */
.btn.is-resetting,
.btn.is-resetting:disabled{
  animation:
    glowGreen 1.2s ease-in-out infinite,
    shake      .6s linear       infinite;
  will-change: transform, box-shadow;
}

/* Optional: reduce motion users */
@media (prefers-reduced-motion: reduce){
  .btn.is-running,
  .btn.is-running:disabled,
  .btn.is-resetting,
  .btn.is-resetting:disabled{
    animation: none;
    box-shadow: 0 0 0 rgba(0,0,0,0);
  }
}


/* Idle soft glow + gentle shake (from page load) */
@keyframes glowIdle {
  0%,100% { box-shadow: 0 0 0 rgba(99,102,241,0); }
  50%     { box-shadow: 0 0 12px rgba(99,102,241,.45); }
}
@keyframes shakeIdle {
  0%,100% { transform: translateX(0); }
  50%     { transform: translateX(1px); }
}

/* apply on page load */
.btn.idle-attract,
.btn.idle-attract:disabled{
  animation:
    glowIdle 1.4s ease-in-out infinite,
    shakeIdle .8s linear       infinite;
  will-change: transform, box-shadow;
}

/* Active states override idle with stronger effects */
@keyframes glowBlue {
  0%,100% { box-shadow: 0 0 0 rgba(59,130,246,0), 0 0 0 rgba(59,130,246,0); }
  50%     { box-shadow: 0 0 18px rgba(59,130,246,.7), 0 0 34px rgba(59,130,246,.4); }
}
@keyframes glowGreen {
  0%,100% { box-shadow: 0 0 0 rgba(34,197,94,0), 0 0 0 rgba(34,197,94,0); }
  50%     { box-shadow: 0 0 18px rgba(34,197,94,.7), 0 0 34px rgba(34,197,94,.4); }
}
@keyframes shakeStrong {
  0%   { transform: translateX(0) rotate(0deg); }
  10%  { transform: translateX(-3px) rotate(-1.2deg); }
  20%  { transform: translateX(3px)  rotate(1.2deg); }
  30%  { transform: translateX(-3px) rotate(-1.2deg); }
  40%  { transform: translateX(3px)  rotate(1.2deg); }
  50%  { transform: translateX(-2px) rotate(-.8deg); }
  60%  { transform: translateX(2px)  rotate(.8deg); }
  70%  { transform: translateX(-2px) rotate(-.8deg); }
  80%  { transform: translateX(2px)  rotate(.8deg); }
  90%  { transform: translateX(-1px) rotate(-.4deg); }
  100% { transform: translateX(0) rotate(0deg); }
}

/* Keep disabled buttons animating */
.btn:disabled { opacity:.6; cursor:not-allowed; }

/* RUN active (overrides idle) */
.btn.is-running,
.btn.is-running:disabled{
  animation:
    glowBlue    1.2s ease-in-out infinite,
    shakeStrong .5s  linear       infinite !important;
}

/* RESET active (overrides idle) */
.btn.is-resetting,
.btn.is-resetting:disabled{
  animation:
    glowGreen   1.2s ease-in-out infinite,
    shakeStrong .5s  linear       infinite !important;
}

/* Prefer reduced motion */
@media (prefers-reduced-motion: reduce){
  .btn.idle-attract,
  .btn.idle-attract:disabled,
  .btn.is-running,
  .btn.is-running:disabled,
  .btn.is-resetting,
  .btn.is-resetting:disabled{
    animation: none !important;
    box-shadow: none !important;
  }
}










/* ========== THEME TOKENS ========== */
:root{
  /* base */
  --bg: #0b0b0c;
  --text: #eaeaea;
  --muted: #b8b8b8;

  /* panels (transparent + fade) */
  --panel-bg: rgba(22,24,28,0.55);
  --panel-border: rgba(255,255,255,0.08);

  /* pane foot (bottom bars inside panels) */
  --pane-foot-bg: #000;
  --pane-foot-text: #fff;

  /* links */
  --link: #ffffff;
  --link-hover: #f59e0b;

  /* buttons */
  --btn-bg: #000000;   /* dark theme buttons = black */
  --btn-fg: #ffffff;   /* text/icon white */
}

body.light{
  --bg: #ffffff;
  --text: #0b0b0c;
  --muted: #444;

  --panel-bg: rgba(255,255,255,0.7);
  --panel-border: rgba(0,0,0,0.08);

  --pane-foot-bg: #ffffff; /* light pane foot */
  --pane-foot-text: #000000;

  --link: #000000;         /* light theme links = black */
  --link-hover: #f59e0b;

  --btn-bg: #ffffff;       /* light theme buttons = white */
  --btn-fg: #000000;       /* glow color uses currentColor = black */
}

/* ========== ROOT LAYOUT (NO PAGE SCROLL) ========== */
html, body { height: 100%; }
body{
  margin:0;
  color:var(--text);
  background:var(--bg);
  display:grid;
  grid-template-rows:auto 1fr auto; /* header, main, footer */
  overflow:hidden; /* no page scrollbars */
}

/* Header */
.site-header{
  display:flex; align-items:center; gap:14px;
  padding:10px 16px;
  border-bottom:1px solid var(--panel-border);
}
.site-header .logo{ display:flex; align-items:center; gap:10px; }
.site-header .logo img{ width:32px; height:32px; }
.site-header .brand{ display:flex; flex-direction:column; line-height:1.1; }
.site-header .brand .title{ font-weight:700; text-transform:lowercase; }
.site-header .brand .powered{ font-size:12px; color:var(--muted); }
.site-header .brand .tagline{ font-size:12px; color:var(--muted); }

.site-header nav{ margin-left:auto; display:flex; gap:16px; }
.site-header nav a{
  color:var(--link); text-decoration:none; font-weight:500;
}
.site-header nav a:hover{ color:var(--link-hover); }

/* Footer (site bottom) */
.site-footer{
  border-top:1px solid var(--panel-border);
  padding:8px 16px;
  background:transparent;
}
.footer-tagline{ text-align:center; font-size:12px; color:var(--muted); margin-bottom:6px; }

/* new footer 3-column layout */
.footer-grid{
  display:grid; grid-template-columns:1fr auto 1fr;
  align-items:center; gap:12px;
}
.footer-left{ display:flex; align-items:center; gap:10px; }
.footer-left img{ width:24px; height:24px; }
.footer-left .txt{ display:flex; flex-direction:column; line-height:1.1; }
.footer-left .txt .powered{ font-size:12px; color:var(--muted); }
.footer-left .txt .subline{ font-size:11px; color:var(--muted); }

.footer-center{ display:flex; align-items:center; gap:10px; justify-content:center; }
.footer-center .label{ font-size:12px; color:var(--muted); }
.footer-center a{ color:var(--link); text-decoration:none; display:inline-flex; }
.footer-center a:hover{ color:var(--link-hover); }

.footer-right{ display:flex; gap:16px; justify-content:flex-end; }
.footer-right a{ color:var(--link); text-decoration:none; font-size:12px; }
.footer-right a:hover{ color:var(--link-hover); }

/* ========== APP GRID ========== */
.stage{ padding:10px 12px; }
.app{
  height:100%; min-height:0; /* allow children to size inside viewport */
  display:grid; gap:8px; /* gaps between panels and resizers */
  /* columns dynamic from JS via gridTemplateColumns */
}

.panel{
  display:flex; flex-direction:column; min-width:0; min-height:0;
  background:var(--panel-bg);
  border:1px solid var(--panel-border);
  border-radius:12px;
  backdrop-filter: blur(6px); /* transparency effect */
  transition: background .25s ease, border-color .25s ease;
}

.pane-head{
  display:flex; align-items:center; gap:10px;
  padding:8px 10px;
  border-bottom:1px solid var(--panel-border);
  min-height:40px; /* consistent top bar height */
}
.pane-body{
  flex:1 1 auto; min-height:0; overflow:auto; /* scroll inside, not page */
  padding:10px;
}
.pane-foot{
  display:flex; align-items:center;
  padding:4px 8px;            /* reduced height to fit text */
  min-height:28px;            /* compact */
  border-top:1px solid var(--panel-border);
  background:var(--pane-foot-bg);
  color:var(--pane-foot-text);
}

/* vertical resizers */
.v-resize{ width:8px; display:flex; align-items:stretch; }
.v-resize > div{ flex:1; cursor:col-resize; opacity:.5; }
.v-resize.right{ }

/* ========== BUTTONS & ACTIVE ANIMATIONS ONLY ========== */
.btn{
  border:1px solid var(--panel-border);
  background:var(--btn-bg);
  color:var(--btn-fg);
  border-radius:10px;
  padding:6px 10px;
  display:inline-flex; align-items:center; justify-content:center;
  gap:6px;
  transition:transform .15s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
}
.btn svg{ width:18px; height:18px; fill:currentColor; }
.btn:hover{ transform: translateY(-1px); }
.btn:disabled{ opacity:.6; cursor:not-allowed; }

/* Glow uses currentColor so:
   - Dark theme: btn color is white -> white glow
   - Light theme: btn color is black -> black glow */
@keyframes glowPulse {
  0%,100% { box-shadow: 0 0 0 currentColor; }
  50%     { box-shadow: 0 0 18px currentColor, 0 0 34px currentColor; }
}
@keyframes shakeStrong {
  0%   { transform: translateX(0) rotate(0deg); }
  10%  { transform: translateX(-3px) rotate(-1.2deg); }
  20%  { transform: translateX(3px)  rotate(1.2deg); }
  30%  { transform: translateX(-3px) rotate(-1.2deg); }
  40%  { transform: translateX(3px)  rotate(1.2deg); }
  50%  { transform: translateX(-2px) rotate(-.8deg); }
  60%  { transform: translateX(2px)  rotate(.8deg); }
  70%  { transform: translateX(-2px) rotate(-.8deg); }
  80%  { transform: translateX(2px)  rotate(.8deg); }
  90%  { transform: translateX(-1px) rotate(-.4deg); }
  100% { transform: translateX(0) rotate(0deg); }
}

/* Only when logically active */
.btn.is-running,
.btn.is-running:disabled{
  animation:
    glowPulse   1.2s ease-in-out infinite,
    shakeStrong 0.5s linear       infinite !important;
  will-change: transform, box-shadow;
}
.btn.is-resetting,
.btn.is-resetting:disabled{
  animation:
    glowPulse   1.2s ease-in-out infinite,
    shakeStrong 0.5s linear       infinite !important;
  will-change: transform, box-shadow;
}

/* Prefer reduced motion */
@media (prefers-reduced-motion: reduce){
  .btn.is-running,
  .btn.is-running:disabled,
  .btn.is-resetting,
  .btn.is-resetting:disabled{
    animation:none !important; box-shadow:none !important;
  }
}

/* Editor area should fill center panel */
#editor{ height:100%; min-height:0; }

/* Links in pane bodies/footers also theme to spec */
.panel a{ color:var(--link); text-decoration:none; }
.panel a:hover{ color:var(--link-hover); }

