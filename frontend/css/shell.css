/* ===================== POLYCODE — SHELL.CSS (DROP-IN) ===================== */
/* Color tokens */
:root{
  color-scheme: dark;
  --bg:#16181b;           /* page bg */
  --panel:#1e2024;        /* panel surface */
  --panel-2:#1a1c1f;      /* header/footer bands */
  --border:#2b2f34;       /* subtle borders */
  --text:#e9edf3;         /* primary text */
  --muted:#aeb5bd;        /* secondary text */
  --brand:#2e5bea;        /* accent */
  --glass: rgba(255,255,255,.05);
  --glass-brd: rgba(255,255,255,.12);
  --ok:#7dffa0; --err:#ff8b8b; --link:#9ecbff;

  --outer-gap: 8px;
}

/* Basic page chrome */
*{ box-sizing:border-box; min-width:0; }
html, body { height: 100%; }
body{
  margin:0;
  background: linear-gradient(180deg,var(--bg),var(--panel-2));
  color: var(--text);
  font: 14px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, sans-serif;
  overflow: hidden; /* page itself doesn't scroll; panels do */
}
a{ color: var(--link); text-decoration: none; }
a:hover{ text-decoration: underline; }

/* ===================== Header ===================== */
.site-header{
  position: sticky; top: 0; z-index: 90;
  display: flex; align-items: center; gap: 12px;
  padding: 10px 16px;
  background: var(--panel-2);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(8px);
}
.site-header .brand-wrap{ display:flex; align-items:center; gap:10px; }
.site-header .brand-wrap img{ width:44px; height:44px; object-fit:contain; }
.site-header .brand-title2{ font-size:18px; font-weight:600; letter-spacing:.3px; }
.site-header .brand-tagline2{ font-size:12px; color:var(--muted); margin-top:-2px; }
.site-header nav{ margin-left:auto; display:flex; gap:16px; flex-wrap:wrap; }
.site-header nav a{ color:var(--text); text-underline-offset:3px; }

/* ===================== App grid (desktop) ===================== */
.app{
  height: calc(100% - 60px); /* header height approx; mobile overrides below */
  padding: var(--outer-gap);
  display: grid;
  gap: var(--outer-gap);
  grid-template-columns: 300px 8px minmax(420px,1fr) 8px minmax(420px, 42%);
  grid-template-rows: 1fr;
}

/* Resizers (desktop visual only) */
.v-resize{ width:8px; background:var(--glass); border:1px solid var(--glass-brd); border-radius:8px; }

/* ===================== Panels ===================== */
.panel{
  display:flex; flex-direction:column; min-height:0;
  background: var(--panel);
  border:1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 24px 60px rgba(0,0,0,.22);
  overflow: hidden;
}
.pane-head{
  display:flex; align-items:center; gap:10px;
  padding: 10px 12px;
  background: linear-gradient(180deg, rgba(255,255,255,.03), transparent);
  border-bottom: 1px solid var(--border);
}
.pane-head .right-controls{ margin-left:auto; display:flex; gap:8px; flex-wrap:wrap; }
.pane-body{ flex:1 1 auto; min-height:0; overflow:hidden; }

/* Monaco & Output containers */
#editor{
  height:auto; min-height:0; flex:1 1 0;
}
#output{
  height:auto; min-height:0; flex:1 1 0;
  overflow:auto; padding:12px;
  background: transparent;
  scrollbar-gutter: stable both-edges;
}

/* ===================== Footer ===================== */
.site-footer{
  padding: 10px 16px;
  background: var(--panel-2);
  border-top: 1px solid var(--border);
}
.site-footer .row{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:space-between; }
.site-footer .links{ display:flex; flex-wrap:wrap; gap:12px; }

/* ===================== Buttons (minimal) ===================== */
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  gap:8px; padding:8px 12px; min-height:36px;
  background: #24272c; color:var(--text);
  border:1px solid var(--glass-brd); border-radius:10px;
  cursor:pointer; user-select:none;
}
.btn:hover{ background:#2a2e34; }
.btn:disabled{ opacity:.55; cursor:not-allowed; }

/* ===================== MOBILE: Fullscreen editor + slide-in drawers ===================== */
@media (max-width: 1024px){

  /* App becomes a column and MUST fill the viewport */
  .app{
    position: relative !important;
    display: flex !important;
    flex-direction: column !important;
    gap: var(--outer-gap) !important;
    padding: var(--outer-gap);
    height: 100svh !important;
    min-height: 0 !important;
  }

  /* Hide resizers */
  .v-resize{ display:none !important; }

  /* Default: show ONLY the editor panel; others collapse */
  .left.panel, .right.panel, #output{ display: none !important; }

  .center.panel{ flex: 1 1 auto !important; min-height: 0 !important; }
  .center.panel .pane-body{ flex: 1 1 auto !important; min-height: 0 !important; }

  /* Make editor own (almost) the full screen height */
  #editor{
    display:block !important;
    flex: 1 1 auto !important;
    min-height: 86svh !important;   /* adjust to 84–90svh if header/footer differ */
    height: auto !important;
    block-size: auto !important;
  }

  /* Panels become drawers when toggled via .app.left-open / .app.right-open */
  .left.panel, .right.panel{
    position: fixed;
    top: 0; bottom: 0;
    width: min(88vw, 420px);
    max-width: 92vw;
    background: var(--panel);
    border: 1px solid var(--border);
    box-shadow: 0 20px 60px rgba(0,0,0,.45);
    z-index: 100;
    transform: translateX(-120%);
    transition: transform .25s ease;
  }
  .right.panel{ right: 0; left: auto; transform: translateX(120%); }

  /* Backdrop */
  .app::after{
    content:""; position:fixed; inset:0;
    background: rgba(0,0,0,.45);
    opacity:0; pointer-events:none; transition:opacity .2s ease;
    z-index:95;
  }

  /* Toggle open states (add these classes from JS) */
  .app.left-open  .left.panel{  display:flex !important; transform: translateX(0); }
  .app.right-open .right.panel{ display:flex !important; transform: translateX(0); }
  .app.left-open::after, .app.right-open::after{ opacity:1; pointer-events:auto; }

  /* Toolbars fit small widths */
  .pane-head{ padding:8px 10px; gap:8px; }
  .pane-head .right-controls{ gap:6px; row-gap:6px; }

  /* Keep header visible */
  .site-header{ position: sticky; top: env(safe-area-inset-top, 0); z-index: 150; }
}

/* Smaller phones give editor a tad more height */
@media (max-width: 640px){
  #editor{ min-height: 88svh !important; }
}

/* Dim overlays should not block output scroll/taps if you use them */
.screen-dim{ opacity:.55; pointer-events:auto !important; }

/* Ensure sticky works even if transforms are applied elsewhere */
.app, .panel, .site-header{ transform: none !important; }
