<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SQL • PolyCode</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="./assets/logo.png" />
  <link rel="stylesheet" href="./css/shell.css" />
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="logo">
      <img src="./assets/logo.png" alt="EDIFICA" />
      <span>PolyCode</span>
      <small>powered by EDIFICA</small>
      <span class="slogan">• learn by running code</span>
    </div>
    <nav>
      <a href="./index.html">Home</a>
      <a href="./about.html">About</a>
      <a href="./contact.html">Contact</a>
    </nav>
  </header>

  <!-- Toolbar -->
  <div class="toolbar">
    <button id="btnRun">Run</button>
    <button id="btnClear" class="secondary">Clear</button>

    <select id="langSelect" onchange="location.href=this.value">
      <option value="./index-sql.html" selected>SQL</option>
      <option value="./index-web.html">HTML/CSS/JS</option>
      <option value="./index-java.html">Java</option>
      <option value="./index-c.html">C</option>
      <!-- add more: index-cpp.html, index-python.html, etc. -->
    </select>

    <div class="status">
      <span class="spin"></span>
      <span class="label ok">Ready</span>
    </div>
  </div>

  <!-- App layout: 3 panes -->


<div class="app">
  <header class="top-header">
    <div class="logo">PolyCode <small>powered by Edifica</small></div>
    <nav>
      <a href="#">Home</a>
      <a href="#">About</a>
      <a href="#">Contact</a>
    </nav>
  </header>

  <div class="controls-bar">
    <button id="run">Run</button>
    <button id="clear">Clear</button>
    <select id="language">
      <option>SQL</option>
      <option>Java</option>
      <option>Python</option>
    </select>
  </div>

  <div class="main-area">
    <aside class="sidebar">
      <h3>About SQL</h3>
      <p>SQL (Structured Query Language) is used to manage data in relational databases...</p>
    </aside>

    <div class="editor-pane" id="editor"></div>

    <div class="output-pane" id="output"></div>
  </div>

  <footer class="bottom-bar">
    <div class="social">
      <span>FB</span> | <span>Insta</span>
    </div>
    <div class="links">
      <a href="#">Privacy Policy</a> | 
      <a href="#">Terms & Conditions</a> | 
      <a href="#">Legal</a>
    </div>
  </footer>
</div>




  

  <!-- Monaco loader + sql.js -->
  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sql.js@1.10.2/dist/sql-wasm.js"></script>

  <!-- Shared shell -->
  <script src="./js/shell.js"></script>

  <!-- Page script -->
  <script>
    const SAMPLE_SQL =
`-- In-browser SQL (sql.js)
CREATE TABLE users(id INTEGER, name TEXT);
INSERT INTO users VALUES (1,'Alice'),(2,'Bob');
SELECT * FROM users;`;

    let db;

    async function bootstrap(){
      await PolyShell.initMonaco({ value: SAMPLE_SQL, language:'sql' });
      const SQL = await window.initSqlJs({
        locateFile: f => 'https://cdn.jsdelivr.net/npm/sql.js@1.10.2/dist/' + f
      });
      db = new SQL.Database();
      PolyShell.setStatus('Ready','ok');
    }

    window.runLang = async function(){
      if (!db) await bootstrap();
      const out = document.getElementById('sqlout');
      out.innerHTML = '';
      try{
        const res = db.exec(window.editor.getValue());
        if (!res.length){ out.textContent='(no rows)'; return; }
        const { columns, values } = res[0];
        const table = document.createElement('table');
        table.style.borderCollapse='collapse';
        const thead=document.createElement('thead'), trh=document.createElement('tr');
        columns.forEach(c=>{ const th=document.createElement('th'); th.textContent=c; th.style.border='1px solid #3a3a3a'; th.style.padding='6px 8px'; trh.appendChild(th);});
        thead.appendChild(trh); table.appendChild(thead);
        const tbody=document.createElement('tbody');
        values.forEach(row=>{
          const tr=document.createElement('tr');
          row.forEach(cell=>{ const td=document.createElement('td'); td.textContent=String(cell); td.style.border='1px solid #3a3a3a'; td.style.padding='6px 8px'; tr.appendChild(td);});
          tbody.appendChild(tr);
        });
        table.appendChild(tbody); out.appendChild(table);
      }catch(e){ out.innerHTML='<pre>'+ (e?.message || String(e)) +'</pre>'; throw e; }
    }

    window.clearLang = function(){ document.getElementById('sqlout').innerHTML=''; };

    // start
    bootstrap();
  </script>
</body>
</html>
