<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SQL • PolyCode</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="./assets/logo.png" />
  <link rel="stylesheet" href="./css/shell.css" />
</head>

<body>
  <!-- Top header (single) -->
  <header class="site-header">
  <div class="logo">
    <img src="./assets/logo.png" alt="EDIFICA" />
    <div class="brand">
      <span class="title">polycode</span>
      <span class="powered">powered by EDIFICA</span>
    </div>
  </div>
  <nav>
    <a href="./index.html">Home</a>
    <a href="./about.html">About</a>
    <a href="./contact.html">Contact</a>
  </nav>
</header>


  <!-- Three-pane app (single) -->

<div class="stage">
  <div class="app">
    <!-- LEFT panel -->
    <section class="panel left" id="leftPanel">
      <div class="pane-head">
        <span class="title" id="leftTitle">SQL</span>
      </div>
      <div class="pane-body">
        <!-- Language dropdown fullscreen in left pane -->
        <select id="langSelect" class="select" onchange="location.href=this.value">
          <option value="./index-sql.html" selected>SQL</option>
          <option value="./index-web.html">HTML/CSS/JS</option>
          <option value="./index-java.html">Java</option>
          <option value="./index-c.html">C</option>
        </select>

        <!-- Optional content loaded from external file -->
        <div id="leftContent" style="margin-top:12px;"></div>
      </div>
    </section>

    <!-- RESIZER between left and center -->
    <div class="v-resize"><div id="dragLeft"></div></div>

    <!-- CENTER panel (Editor) -->
    <section class="panel center" id="centerPanel">
      <div class="pane-head">
        <span class="title" id="centerTitle">SQL – Editor</span>
        <div class="right-controls">
          <span class="status">
            <span class="spin" id="spinner"></span>
            <span id="status" class="ok">Ready</span>
          </span>
          <button id="themeToggle" class="btn">Light</button>
          <button id="btnRun" class="btn primary" title="Run">▶</button>
        </div>
      </div>
      <div id="editor"></div>
    </section>

    <!-- RESIZER between center and right -->
    <div class="v-resize right"><div id="dragRight"></div></div>

    <!-- RIGHT panel (Screen) -->
    <section class="panel right" id="rightPanel">
      <div class="pane-head">
        <span class="title">Screen</span>
        <div class="right-controls" style="margin-left:auto; display:flex; gap:10px;">
          <button id="btnReset" class="btn" title="Reset">⟲</button>
        </div>
      </div>
      <div id="output" class="screen-dim">
        <div id="sqlout"></div>
      </div>
    </section>
  </div>
</div>

<!-- Floating always-visible chevron for collapse/expand -->
<div class="chevron-tab" id="chevronTab" title="Toggle left panel">
  <svg viewBox="0 0 24 24"><path d="M9.29 6.71a1 1 0 011.42 0L15 11l-4.29 4.29a1 1 0 11-1.42-1.42L12.17 11 9.29 8.12a1 1 0 010-1.41z"/></svg>
</div>







  

  <!-- Footer (single) -->
  <footer class="site-footer">
  <div class="footer-tagline" id="footerTagline">learn • code • run</div>
  <div class="footer-row">
    <div class="social">
      <span class="label">Follow us</span>
      <a href="https://facebook.com" target="_blank" aria-label="Facebook">
        <svg viewBox="0 0 24 24" width="18" height="18"><path d="M22 12.07C22 6.48 17.52 2 11.93 2S2 6.48 2 12.07c0 5.01 3.66 9.16 8.44 9.93v-7.03H7.9v-2.9h2.54V9.41c0-2.5 1.49-3.89 3.77-3.89 1.09 0 2.24.2 2.24.2v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.44 2.9h-2.34v7.03C18.34 21.23 22 17.08 22 12.07z"/></svg>
      </a>
      <a href="https://instagram.com" target="_blank" aria-label="Instagram">
        <svg viewBox="0 0 24 24" width="18" height="18"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm6.5-.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 9.5A2.5 2.5 0 1 1 9.5 12 2.5 2.5 0 0 1 12 9.5z"/></svg>
      </a>
    </div>
    <div class="legal">
      <a href="./privacy.html">Privacy Policy</a>
      <a href="./terms.html">Terms & Conditions</a>
      <a href="./legal.html">Legal Information</a>
    </div>
  </div>
</footer>

  <!-- Scripts (order matters) -->
  <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sql.js@1.10.2/dist/sql-wasm.js"></script>
  <script src="./js/shell.js"></script>



  <script>
  const SAMPLE_SQL =
`-- In-browser SQL (sql.js)
CREATE TABLE users(id INTEGER, name TEXT);
INSERT INTO users VALUES (1,'Alice'),(2,'Bob');
SELECT * FROM users;`;

  let db;

  async function bootstrap(){
    await PolyShell.initMonaco({ value:SAMPLE_SQL, language:'sql' });
    const SQL = await window.initSqlJs({
      locateFile: f => 'https://cdn.jsdelivr.net/npm/sql.js@1.10.2/dist/' + f
    });
    db = new SQL.Database();
    PolyShell.setStatus('Ready','ok');
    PolyShell.loadLeftContent('sql');      // ← loads /content/sql.html into left pane
  }

  window.runLang = async function(){
    if (!db) await bootstrap();
    const out = document.getElementById('sqlout');
    out.innerHTML = '';
    try{
      const res = db.exec(window.editor.getValue());
      if (!res.length){ out.textContent='(no rows)'; return; }
      const { columns, values } = res[0];
      const table = document.createElement('table');
      table.style.borderCollapse='collapse';
      const thead=document.createElement('thead'), trh=document.createElement('tr');
      columns.forEach(c=>{ const th=document.createElement('th'); th.textContent=c;
        th.style.border='1px solid var(--border)'; th.style.padding='6px 8px'; trh.appendChild(th);});
      thead.appendChild(trh); table.appendChild(thead);
      const tbody=document.createElement('tbody');
      values.forEach(row=>{
        const tr=document.createElement('tr');
        row.forEach(cell=>{ const td=document.createElement('td'); td.textContent=String(cell);
          td.style.border='1px solid var(--border)'; td.style.padding='6px 8px'; tr.appendChild(td);});
        tbody.appendChild(tr);
      });
      table.appendChild(tbody); out.appendChild(table);
    }catch(e){
      document.getElementById('sqlout').innerHTML = '<pre>'+ (e?.message || String(e)) +'</pre>';
      throw e;
    }
  }

  window.clearLang = function(){
    document.getElementById('sqlout').innerHTML='';
  }

  bootstrap();
</script>


  
</body>




  
</html>
